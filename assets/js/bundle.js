"use strict";!function(t,s){s.DOCS=s.DOCS||{},t(function(){DOCS.menu.init()}),DOCS.menu={element:".docs-frame__menu",menuitem:".docs-frame__menu__item",viewer:".docs-frame__viewer",init:function(){var s=this;t(s.menuitem).each(function(){var e=t(this);t(this).children("a").filter("[href^=#]").length&&e.addClass("is-disabled"),e.hasClass("is-active")&&s.open(e)}),t(s.menuitem).on("click","> a",function(e){var i=t(e.delegateTarget);e.preventDefault(),s.open(i)})},open:function(s){var e=t(s);e.filter(".is-disabled").length||(this.close(e.siblings().filter(".is-active")),this.view(e),e.addClass("is-active"))},close:function(s){t(s).removeClass("is-active")},view:function(s){var e=t(s).children("a").attr("href");t(this.viewer).attr("src",e)}}}(window.jQuery,window),function(t,s){function e(){var t=document.createElement("fakeelement"),s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var e in s)if(void 0!==t.style[e])return s[e];return!1}var i=s.UI||{};s.UI=i,t(document).ready(function(){}),t.fn.transitionEndAfter=function(s,i){var n=this,a=!1,o=e();return t(this).one(o,function(){a=!0,s()}),setTimeout(function(){a||t(n).trigger(o)},i),this},i.tab=function(){var t='[data-ui-tab="tab"]',s='[data-ui-tab="panel"]',e={handleTabClick:function(t){t=t[0]||t;this.open(t)},open:function(t){var s=function(t){for(var s=[],e=t.parentNode.firstChild;e;e=e.nextSibling)1===e.nodeType&&e!==t&&s.push(e);return s}((t=t[0]||t).parentElement),e=this._getTarget(t);if(!e.item.classList.contains("is-active")){e.item.classList.add("is-active"),e.panel&&e.panel.classList.add("is-active");for(var i in s)this.close(s[i].children[0])}},close:function(t){var s=this._getTarget(t);s.item.classList.contains("is-active")&&s.item.classList.remove("is-active"),s.panel&&s.panel.classList.contains("is-active")&&s.panel.classList.remove("is-active")},_getTarget:function(t){var e={};return e.item=t.parentElement,e.panel=document.querySelector(s+"#"+t.getAttribute("aria-controls")),e}};return document.addEventListener("click",function(s){if(s.preventDefault(),s.target.closest(t)){var i=s.target.closest(t);i&&e.handleTabClick(i)}}),e}(),i.modal=function(){var i={WRAPPER:".wrapper",MODAL:".modal",MODAL_WINDOW:".modal__window",MODAL_OPEN:'[data-ui-modal="open"]',MODAL_CLOSE:'[data-ui-modal="close"]'},n={IS_MODAL_OPEN:"modal-open",IS_OPENED:"is-opened",IS_OPENING:"is-opening",IS_CLOSED:"is-closed",IS_CLOSING:"is-closing",IS_CURRENT:"is-current",IS_ACTIVE:"is-active",IS_PREVIUS:"is-previus"},a={CLICK_OPEN:"click.modal:open",CLICK_CLOSE:"click.modal:close",OPENED:"modal:opened",CLOSED:"modal:closed"},o=function(t){this.element=t,this.scrolltop=null,this.transition=e()};o.prototype={open:function(e){var o=this,l=e||o.element,r=null;t(l).hasClass(n.IS_OPENED)||t(l).hasClass(n.IS_OPENING)||t(l).hasClass(n.IS_CLOSING)||(o.scrolltop=t(s).scrollTop(),t(document.body).hasClass(n.IS_MODAL_OPEN)||t(document.body).addClass(n.IS_MODAL_OPEN),document.body.appendChild(l),t(l)[0].offsetHeight,t(l).removeClass(n.IS_CLOSED),t(l).addClass(n.IS_OPENING),t(l).addClass(n.IS_ACTIVE),t(l).addClass(n.IS_CURRENT),t(l).removeClass(n.IS_PREVIUS),t(l).siblings(i.MODAL+"."+n.IS_ACTIVE).removeClass(n.IS_CURRENT),t(l).siblings(i.MODAL+"."+n.IS_ACTIVE).removeClass(n.IS_PREVIUS),t(l).siblings(i.MODAL+"."+n.IS_ACTIVE).last().addClass(n.IS_PREVIUS),o.transition&&t(l).transitionEndAfter(function(){t(l).removeClass(n.IS_OPENING),t(l).addClass(n.IS_OPENED),t(l).trigger(a.OPENED)},300),t(l).hasClass(n.IS_OPENED)?t(l).find(i.MODAL_WINDOW).scrollTop(t(l).attr("data-scrolltop")):t(l).attr("data-scrolltop",0),r=t(l).siblings(i.MODAL+"."+n.IS_PREVIUS)[0],t(r).length&&t(r).attr("data-scrolltop",t(r).find(i.MODAL_WINDOW).scrollTop()),t(l).off(a.CLICK_CLOSE).on(a.CLICK_CLOSE,i.MODAL_CLOSE,function(){o.close(t(l))}))},close:function(e){var o=e||this.element,l=null;!t(o).hasClass(n.IS_OPENED)||t(o).hasClass(n.IS_CLOSED)||t(o).hasClass(n.IS_OPENING)||t(o).hasClass(n.IS_CLOSING)||(t(o).addClass(n.IS_CLOSING),t(o).removeClass(n.IS_OPENED),t(o).removeClass(n.IS_ACTIVE),t(o).removeClass(n.IS_CURRENT),t(o).removeClass(n.IS_PREVIUS),t(o).siblings(i.MODAL+"."+n.IS_ACTIVE).last().addClass(n.IS_CURRENT),t(o).siblings(i.MODAL+"."+n.IS_ACTIVE).removeClass(n.IS_PREVIUS),t(o).siblings(i.MODAL+"."+n.IS_CURRENT).prevAll("."+n.IS_ACTIVE).first().addClass(n.IS_PREVIUS),this.transition&&t(o).transitionEndAfter(function(){t(o).removeClass(n.IS_CLOSING),t(o).addClass(n.IS_CLOSED),t(o).trigger(a.CLOSED),t(o).siblings(i.MODAL+"."+n.IS_OPENED).length||t(document.body).removeClass(n.IS_MODAL_OPEN)},300),t(o).attr("data-scrolltop",0),l=t(o).siblings(i.MODAL+"."+n.IS_CURRENT)[0],t(l).length?(t(l).attr("data-scrolltop",t(l).find(i.MODAL_WINDOW).scrollTop()),t(l).find(i.MODAL_WINDOW).scrollTop(t(l).attr("data-scrolltop"))):t(s).scrollTop(this.scrolltop))}},t.fn.modal=function(s){return this.each(function(){var e=t(this).data("UI.modal"),i="string"==typeof s&&s;e||(e=new o(this),t(this).data("UI.modal",e)),i&&e[i](this)})}}()}(window.jQuery,window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRvY3MuanMiLCJzY3JpcHQuanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsIkRPQ1MiLCJtZW51IiwiaW5pdCIsImVsZW1lbnQiLCJtZW51aXRlbSIsInZpZXdlciIsIl90aGlzIiwidGhpcyIsImVhY2giLCIkaXRlbSIsImNoaWxkcmVuIiwiZmlsdGVyIiwibGVuZ3RoIiwiYWRkQ2xhc3MiLCJoYXNDbGFzcyIsIm9wZW4iLCJvbiIsImUiLCJkZWxlZ2F0ZVRhcmdldCIsInByZXZlbnREZWZhdWx0IiwiJGVsZW1lbnQiLCJjbG9zZSIsInNpYmxpbmdzIiwidmlldyIsInJlbW92ZUNsYXNzIiwic3JjIiwiYXR0ciIsImpRdWVyeSIsImdldFRyYW5zaXRpb24iLCJmYWtlZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInRyYW5zaXRpb25FbmRFdmVudE5hbWUiLCJXZWJraXRUcmFuc2l0aW9uIiwiTW96VHJhbnNpdGlvbiIsIk9UcmFuc2l0aW9uIiwidHJhbnNpdGlvbiIsIm5hbWUiLCJ1bmRlZmluZWQiLCJzdHlsZSIsIlVJIiwicmVhZHkiLCJmbiIsInRyYW5zaXRpb25FbmRBZnRlciIsImNhbGxiYWNrIiwiZHVyYXRpb24iLCJjYWxsZWQiLCJ0cmFuc2l0aW9uZW5kIiwib25lIiwic2V0VGltZW91dCIsInRyaWdnZXIiLCJ0YWIiLCJTRUxFQ1RPUiIsImhhbmRsZVRhYkNsaWNrIiwic2libGluZyIsInBhcmVudE5vZGUiLCJmaXJzdENoaWxkIiwibmV4dFNpYmxpbmciLCJub2RlVHlwZSIsInB1c2giLCJnZXRTaWJsaW5ncyIsInBhcmVudEVsZW1lbnQiLCJ0YXJnZXQiLCJfZ2V0VGFyZ2V0IiwiaXRlbSIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiYWRkIiwicGFuZWwiLCJpIiwicmVtb3ZlIiwicXVlcnlTZWxlY3RvciIsImdldEF0dHJpYnV0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbG9zZXN0IiwibW9kYWwiLCJTZWxlY3RvciIsIldSQVBQRVIiLCJNT0RBTCIsIk1PREFMX1dJTkRPVyIsIk1PREFMX09QRU4iLCJNT0RBTF9DTE9TRSIsIlN0YXRlIiwiSVNfTU9EQUxfT1BFTiIsIklTX09QRU5FRCIsIklTX09QRU5JTkciLCJJU19DTE9TRUQiLCJJU19DTE9TSU5HIiwiSVNfQ1VSUkVOVCIsIklTX0FDVElWRSIsIklTX1BSRVZJVVMiLCJFdmVudCIsIkNMSUNLX09QRU4iLCJDTElDS19DTE9TRSIsIk9QRU5FRCIsIkNMT1NFRCIsIk1vZGFsIiwic2Nyb2xsdG9wIiwicHJvdG90eXBlIiwicHJldml1cyIsInNjcm9sbFRvcCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsIm9mZnNldEhlaWdodCIsImxhc3QiLCJmaW5kIiwib2ZmIiwiY3VycmVudCIsInByZXZBbGwiLCJmaXJzdCIsIm9wdGlvbiIsImRhdGEiLCJtZXRob2QiXSwibWFwcGluZ3MiOiJjQUFBLFNBQUFBLEVBQUFDLEdBSUFBLEVBQUFDLEtBQUFELEVBQUFDLFNBRUFGLEVBQUEsV0FDQUUsS0FBQUMsS0FBQUMsU0FJQUYsS0FBQUMsTUFDQUUsUUFBQSxvQkFDQUMsU0FBQSwwQkFDQUMsT0FBQSxzQkFDQUgsS0FBQSxXQUVBLElBQUFJLEVBQUFDLEtBRUFULEVBQUFRLEVBQUFGLFVBQUFJLEtBQUEsV0FFQSxJQUFBQyxFQUFBWCxFQUFBUyxNQUNBVCxFQUFBUyxNQUFBRyxTQUFBLEtBRUFDLE9BQUEsYUFBQUMsUUFDQUgsRUFBQUksU0FBQSxlQUdBSixFQUFBSyxTQUFBLGNBQ0FSLEVBQUFTLEtBQUFOLEtBSUFYLEVBQUFRLEVBQUFGLFVBQUFZLEdBQUEsUUFBQSxNQUFBLFNBQUFDLEdBRUEsSUFBQVIsRUFBQVgsRUFBQW1CLEVBQUFDLGdCQUVBRCxFQUFBRSxpQkFFQWIsRUFBQVMsS0FBQU4sTUFNQU0sS0FBQSxTQUFBWixHQUVBLElBQ0FpQixFQUFBdEIsRUFBQUssR0FFQWlCLEVBQUFULE9BQUEsZ0JBQUFDLFNBSEFMLEtBT0FjLE1BQUFELEVBQUFFLFdBQUFYLE9BQUEs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QUEsaUJBQUFGLEdBQUFBLEVBRUFDLElBQ0FBLEVBQUEsSUFBQWYsRUFBQXpGLE1BQ0FULEVBQUFTLE1BQUF3RyxLQXpKQSxXQXlKQUEsSUFHQUMsR0FDQUQsRUFBQUMsR0FBQXpHLFNBL0pBLEdBeE9BLENBNllBUixPQUFBNEIsT0FBQTVCIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIjsoZnVuY3Rpb24oJCwgd2luZG93KSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHdpbmRvdy5ET0NTID0gd2luZG93LkRPQ1MgfHwge307XHJcblxyXG4gICAgJChmdW5jdGlvbigpIHtcclxuICAgICAgICBET0NTLm1lbnUuaW5pdCgpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIERPQ1MubWVudSA9IHtcclxuICAgICAgICBlbGVtZW50IDogJy5kb2NzLWZyYW1lX19tZW51JyxcclxuICAgICAgICBtZW51aXRlbSA6ICcuZG9jcy1mcmFtZV9fbWVudV9faXRlbScsXHJcbiAgICAgICAgdmlld2VyIDogJy5kb2NzLWZyYW1lX192aWV3ZXInLFxyXG4gICAgICAgIGluaXQgOiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAkKF90aGlzLm1lbnVpdGVtKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciAkaXRlbSA9ICQodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgJGFuY2hvciA9ICQodGhpcykuY2hpbGRyZW4oJ2EnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggJGFuY2hvci5maWx0ZXIoJ1tocmVmXj0jXScpLmxlbmd0aCApIHtcclxuICAgICAgICAgICAgICAgICAgICAkaXRlbS5hZGRDbGFzcygnaXMtZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiggJGl0ZW0uaGFzQ2xhc3MoJ2lzLWFjdGl2ZScpICkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLm9wZW4oICRpdGVtICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJChfdGhpcy5tZW51aXRlbSkub24oJ2NsaWNrJywnPiBhJywgZnVuY3Rpb24oZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciAkaXRlbSA9ICQoZS5kZWxlZ2F0ZVRhcmdldCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIF90aGlzLm9wZW4oICRpdGVtICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy9fdGhpcy5vcGVuKCAkKF90aGlzLm1lbnVpdGVtKS5lcSgwKSApO1xyXG5cclxuICAgICAgICB9LFxyXG4gICAgICAgIG9wZW4gOiBmdW5jdGlvbiggZWxlbWVudCApIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAkZWxlbWVudCA9ICQoZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICBpZiggJGVsZW1lbnQuZmlsdGVyKCcuaXMtZGlzYWJsZWQnKS5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIF90aGlzLmNsb3NlKCAkZWxlbWVudC5zaWJsaW5ncygpLmZpbHRlcignLmlzLWFjdGl2ZScpICk7XHJcbiAgICAgICAgICAgIF90aGlzLnZpZXcoICRlbGVtZW50ICk7XHJcblxyXG4gICAgICAgICAgICAkZWxlbWVudC5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjbG9zZSA6IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xyXG5cclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICRlbGVtZW50ID0gJChlbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgICRlbGVtZW50LnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHZpZXcgOiBmdW5jdGlvbiggZWxlbWVudCApIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAkYW5jaG9yID0gJChlbGVtZW50KS5jaGlsZHJlbignYScpLFxyXG4gICAgICAgICAgICAgICAgc3JjID0gJGFuY2hvci5hdHRyKCdocmVmJyk7XHJcblxyXG4gICAgICAgICAgICAkKF90aGlzLnZpZXdlcikuYXR0cignc3JjJywgc3JjKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxufSkod2luZG93LmpRdWVyeSwgd2luZG93KTsiLCJcclxuOyhmdW5jdGlvbigkLCB3aW5kb3cpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIFVJID0gd2luZG93LlVJIHx8IHt9O1xyXG5cclxuICAgIHdpbmRvdy5VSSA9IFVJO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgICAqIFVJLnV0aWxcclxuICAgICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcbiAgICBmdW5jdGlvbiBnZXRTY3JvbGxiYXJXaWR0aCgpIHtcclxuICAgICAgICB2YXIgd2luZG93SW5uZXJXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG5cclxuICAgICAgICBpZiggIXdpbmRvd0lubmVyV2lkdGggKSB7XHJcblxyXG4gICAgICAgICAgdmFyIGRvY3VtZW50RWxlbWVudFJlY3QgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgICAgICAgd2luZG93SW5uZXJXaWR0aCA9IGRvY3VtZW50RWxlbWVudFJlY3QucmlnaHQgLSBNYXRoLmFicyhkb2N1bWVudEVsZW1lbnRSZWN0LmxlZnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHdpbmRvd0lubmVyV2lkdGggLSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRUcmFuc2l0aW9uKCkge1xyXG4gICAgICAgIHZhciBmYWtlZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zha2VlbGVtZW50JyksXHJcbiAgICAgICAgICAgIHRyYW5zaXRpb25FbmRFdmVudE5hbWUgPSB7XHJcbiAgICAgICAgICAgICAgICBXZWJraXRUcmFuc2l0aW9uIDogJ3dlYmtpdFRyYW5zaXRpb25FbmQnLFxyXG4gICAgICAgICAgICAgICAgTW96VHJhbnNpdGlvbiAgICA6ICd0cmFuc2l0aW9uZW5kJyxcclxuICAgICAgICAgICAgICAgIE9UcmFuc2l0aW9uICAgICAgOiAnb1RyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmQnLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbiAgICAgICA6ICd0cmFuc2l0aW9uZW5kJ1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBmb3IoIHZhciBuYW1lIGluIHRyYW5zaXRpb25FbmRFdmVudE5hbWUgKSB7XHJcbiAgICAgICAgICAgIGlmKCBmYWtlZWxlbWVudC5zdHlsZVtuYW1lXSAhPT0gdW5kZWZpbmVkICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zaXRpb25FbmRFdmVudE5hbWVbbmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgJC5mbi50cmFuc2l0aW9uRW5kQWZ0ZXIgPSBmdW5jdGlvbihjYWxsYmFjaywgZHVyYXRpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzLFxyXG4gICAgICAgICAgICBjYWxsZWQgPSBmYWxzZSxcclxuICAgICAgICAgICAgdHJhbnNpdGlvbmVuZCA9IGdldFRyYW5zaXRpb24oKTtcclxuXHJcbiAgICAgICAgJCh0aGlzKS5vbmUodHJhbnNpdGlvbmVuZCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiggIWNhbGxlZCApIHtcclxuICAgICAgICAgICAgICAgICQoX3RoaXMpLnRyaWdnZXIodHJhbnNpdGlvbmVuZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBkdXJhdGlvbik7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0U2libGluZ3MoZWxlbWVudCkge1xyXG4gICAgICAgIHZhciBzaWJsaW5ncyA9IFtdO1xyXG4gICAgICAgIHZhciBzaWJsaW5nID0gZWxlbWVudC5wYXJlbnROb2RlLmZpcnN0Q2hpbGQ7XHJcbiAgICAgICAgZm9yICg7IHNpYmxpbmc7IHNpYmxpbmcgPSBzaWJsaW5nLm5leHRTaWJsaW5nKSB7XHJcbiAgICAgICAgICAgIGlmIChzaWJsaW5nLm5vZGVUeXBlICE9PSAxIHx8IHNpYmxpbmcgPT09IGVsZW1lbnQpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBzaWJsaW5ncy5wdXNoKHNpYmxpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2libGluZ3M7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICAgKiBVSS50YWJcclxuICAgICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcbiAgICBVSS50YWIgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIHZhciBVSV9OQU1FID0gJ1VJLnRhYic7XHJcblxyXG4gICAgICAgIHZhciBTRUxFQ1RPUiA9IHtcclxuICAgICAgICAgICAgVEFCIDogJ1tkYXRhLXVpLXRhYj1cInRhYlwiXScsXHJcbiAgICAgICAgICAgIFBBTkVMIDogJ1tkYXRhLXVpLXRhYj1cInBhbmVsXCJdJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBTVEFURSA9IHtcclxuICAgICAgICAgICAgSVNfQUNUSVZFIDogJ2FjdGl2ZSdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgRVZFTlQgPSB7XHJcbiAgICAgICAgICAgIENMSUNLX09QRU4gOiAnY2xpY2sudGFiOm9wZW4nXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIHRhYiA9IHtcclxuICAgICAgICAgICAgaGFuZGxlVGFiQ2xpY2sgOiBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50WzBdIHx8IGVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvcGVuIDogZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudFswXSB8fCBlbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgdmFyIHNpYmxpbmdzID0gZ2V0U2libGluZ3MoZWxlbWVudC5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLl9nZXRUYXJnZXQoZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIHRhcmdldC5pdGVtLmNsYXNzTGlzdC5jb250YWlucygnaXMtYWN0aXZlJykgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRhcmdldC5pdGVtLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCB0YXJnZXQucGFuZWwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnBhbmVsLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvciggdmFyIGkgaW4gc2libGluZ3MgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2xvc2Uoc2libGluZ3NbaV0uY2hpbGRyZW5bMF0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjbG9zZSA6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLl9nZXRUYXJnZXQoZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIHRhcmdldC5pdGVtLmNsYXNzTGlzdC5jb250YWlucygnaXMtYWN0aXZlJykgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Lml0ZW0uY2xhc3NMaXN0LnJlbW92ZSgnaXMtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIHRhcmdldC5wYW5lbCApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiggdGFyZ2V0LnBhbmVsLmNsYXNzTGlzdC5jb250YWlucygnaXMtYWN0aXZlJykgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRhcmdldC5wYW5lbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9nZXRUYXJnZXQgOiBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0ge307XHJcblxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0Lml0ZW0gPSBlbGVtZW50LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQucGFuZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFNFTEVDVE9SLlBBTkVMICsgJyMnKyBlbGVtZW50LmdldEF0dHJpYnV0ZSgnYXJpYS1jb250cm9scycpKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgaWYoIWUudGFyZ2V0LmNsb3Nlc3QoU0VMRUNUT1IuVEFCKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlLnRhcmdldC5jbG9zZXN0KFNFTEVDVE9SLlRBQik7XHJcblxyXG5cclxuICAgICAgICAgICAgaWYoICFlbGVtZW50ICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0YWIuaGFuZGxlVGFiQ2xpY2soZWxlbWVudCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gJChkb2N1bWVudCkub24oRVZFTlQuQ0xJQ0tfT1BFTiwgU0VMRUNUT1IuVEFCLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgLy8gICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vICAgICB0YWIuaGFuZGxlVGFiQ2xpY2sodGhpcyk7XHJcbiAgICAgICAgLy8gfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0YWI7XHJcblxyXG4gICAgICAgIC8qdmFyIHRhYiA9IHtcclxuICAgICAgICAgICAgZWxlbWVudCA6ICdbZGF0YS11aS10YWI9XCJ0YWJcIl0nLFxyXG4gICAgICAgICAgICBwYW5lbCA6ICdbZGF0YS11aS10YWI9XCJwYW5lbFwiXScsXHJcbiAgICAgICAgICAgIG9wZW4gOiBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IF90aGlzLl9nZXRUYXJnZXQoIGVsZW1lbnQgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggdGFyZ2V0Lml0ZW0uaGFzQ2xhc3MoJ2lzLWFjdGl2ZScpICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0YXJnZXQuaXRlbS5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIHRhcmdldC5wYW5lbC5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnBhbmVsLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jbG9zZSggdGFyZ2V0Lml0ZW0uc2libGluZ3MoKS5maWx0ZXIoJy5pcy1hY3RpdmUnKS5jaGlsZHJlbihfdGhpcy5lbGVtZW50KSApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjbG9zZSA6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gX3RoaXMuX2dldFRhcmdldCggZWxlbWVudCApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCAhdGFyZ2V0Lml0ZW0uaGFzQ2xhc3MoJ2lzLWFjdGl2ZScpICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0YXJnZXQuaXRlbS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIHRhcmdldC5wYW5lbC5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnBhbmVsLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2dldFRhcmdldCA6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0ge307XHJcblxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0Lml0ZW0gPSAkKGVsZW1lbnQpLnBhcmVudCgpO1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnBhbmVsID0gJChfdGhpcy5wYW5lbCkuZmlsdGVyKCcjJyArICQoZWxlbWVudCkuYXR0cignYXJpYS1jb250cm9scycpKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgdGFiLmVsZW1lbnQsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgdGFiLm9wZW4oIHRoaXMgKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRhYjsqL1xyXG4gICAgfSkoKTtcclxuXHJcblxyXG5cclxuXHJcbiAgICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgICogVUkubW9kYWxcclxuICAgICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcbiAgICAgVUkubW9kYWwgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIHZhciBVSV9OQU1FID0gJ1VJLm1vZGFsJyxcclxuICAgICAgICAgICAgREVGQVVMVF9EVVJBVElPTiA9IDMwMCxcclxuICAgICAgICAgICAgT1ZFUkxBWV9EVVJBVElPTiA9IDMwMCxcclxuICAgICAgICAgICAgREVGQVVMVF9FQVNJTkcgPSAnc3dpbmcnLFxyXG4gICAgICAgICAgICBPVkVSTEFZX0VBU0lORyA9ICdzd2luZyc7XHJcblxyXG4gICAgICAgIHZhciBTZWxlY3RvciA9IHtcclxuICAgICAgICAgICAgV1JBUFBFUiAgICAgICAgIDogJy53cmFwcGVyJyxcclxuICAgICAgICAgICAgTU9EQUwgICAgICAgICAgIDogJy5tb2RhbCcsXHJcbiAgICAgICAgICAgIE1PREFMX1dJTkRPVyAgICA6ICcubW9kYWxfX3dpbmRvdycsXHJcbiAgICAgICAgICAgIE1PREFMX09QRU4gICAgICA6ICdbZGF0YS11aS1tb2RhbD1cIm9wZW5cIl0nLFxyXG4gICAgICAgICAgICBNT0RBTF9DTE9TRSAgICAgOiAnW2RhdGEtdWktbW9kYWw9XCJjbG9zZVwiXSdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgU3RhdGUgPSB7XHJcbiAgICAgICAgICAgIElTX01PREFMX09QRU4gICA6ICdtb2RhbC1vcGVuJyxcclxuICAgICAgICAgICAgSVNfT1BFTkVEICAgICAgIDogJ2lzLW9wZW5lZCcsXHJcbiAgICAgICAgICAgIElTX09QRU5JTkcgICAgICA6ICdpcy1vcGVuaW5nJyxcclxuICAgICAgICAgICAgSVNfQ0xPU0VEICAgICAgIDogJ2lzLWNsb3NlZCcsXHJcbiAgICAgICAgICAgIElTX0NMT1NJTkcgICAgICA6ICdpcy1jbG9zaW5nJyxcclxuICAgICAgICAgICAgSVNfQ1VSUkVOVCAgICAgIDogJ2lzLWN1cnJlbnQnLFxyXG4gICAgICAgICAgICBJU19BQ1RJVkUgICAgICAgOiAnaXMtYWN0aXZlJyxcclxuICAgICAgICAgICAgSVNfUFJFVklVUyAgICAgIDogJ2lzLXByZXZpdXMnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIEV2ZW50ID0ge1xyXG4gICAgICAgICAgICBDTElDS19PUEVOICAgICAgOiAnY2xpY2subW9kYWw6b3BlbicsXHJcbiAgICAgICAgICAgIENMSUNLX0NMT1NFICAgICA6ICdjbGljay5tb2RhbDpjbG9zZScsXHJcbiAgICAgICAgICAgIE9QRU5FRCAgICAgICAgICA6ICdtb2RhbDpvcGVuZWQnLFxyXG4gICAgICAgICAgICBDTE9TRUQgICAgICAgICAgOiAnbW9kYWw6Y2xvc2VkJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBNb2RhbCA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGx0b3AgPSBudWxsO1xyXG4gICAgICAgICAgICB0aGlzLnRyYW5zaXRpb24gPSBnZXRUcmFuc2l0aW9uKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgTW9kYWwucHJvdG90eXBlID0ge1xyXG4gICAgICAgICAgICBvcGVuIDogZnVuY3Rpb24oZWxlbWVudCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gZWxlbWVudCB8fCBfdGhpcy5lbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHByZXZpdXMgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCAoLyokKHRhcmdldCkuaGFzQ2xhc3MoU3RhdGUuSVNfQ1VSUkVOVCkgJiYgKi8kKHRhcmdldCkuaGFzQ2xhc3MoU3RhdGUuSVNfT1BFTkVEKSkgfHwgJCh0YXJnZXQpLmhhc0NsYXNzKFN0YXRlLklTX09QRU5JTkcpIHx8ICQodGFyZ2V0KS5oYXNDbGFzcyhTdGF0ZS5JU19DTE9TSU5HKSApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgX3RoaXMuc2Nyb2xsdG9wID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCAhJChkb2N1bWVudC5ib2R5KS5oYXNDbGFzcyhTdGF0ZS5JU19NT0RBTF9PUEVOKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50LmJvZHkpLmFkZENsYXNzKFN0YXRlLklTX01PREFMX09QRU4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoIHRhcmdldCApO1xyXG5cclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KVswXS5vZmZzZXRIZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLnJlbW92ZUNsYXNzKFN0YXRlLklTX0NMT1NFRCk7XHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkuYWRkQ2xhc3MoU3RhdGUuSVNfT1BFTklORyk7XHJcblxyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLmFkZENsYXNzKFN0YXRlLklTX0FDVElWRSk7XHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkuYWRkQ2xhc3MoU3RhdGUuSVNfQ1VSUkVOVCk7XHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkucmVtb3ZlQ2xhc3MoU3RhdGUuSVNfUFJFVklVUyk7XHJcblxyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLnNpYmxpbmdzKFNlbGVjdG9yLk1PREFMICsgJy4nICsgU3RhdGUuSVNfQUNUSVZFKS5yZW1vdmVDbGFzcyhTdGF0ZS5JU19DVVJSRU5UKTtcclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5zaWJsaW5ncyhTZWxlY3Rvci5NT0RBTCArICcuJyArIFN0YXRlLklTX0FDVElWRSkucmVtb3ZlQ2xhc3MoU3RhdGUuSVNfUFJFVklVUyk7XHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkuc2libGluZ3MoU2VsZWN0b3IuTU9EQUwgKyAnLicgKyBTdGF0ZS5JU19BQ1RJVkUpLmxhc3QoKS5hZGRDbGFzcyhTdGF0ZS5JU19QUkVWSVVTKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggX3RoaXMudHJhbnNpdGlvbiApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRhcmdldCkudHJhbnNpdGlvbkVuZEFmdGVyKHRyYW5zaXRpb25Db21wbGV0ZSwgREVGQVVMVF9EVVJBVElPTik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdHJhbnNpdGlvbkNvbXBsZXRlKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGFyZ2V0KS5yZW1vdmVDbGFzcyhTdGF0ZS5JU19PUEVOSU5HKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRhcmdldCkuYWRkQ2xhc3MoU3RhdGUuSVNfT1BFTkVEKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRhcmdldCkudHJpZ2dlcihFdmVudC5PUEVORUQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmKCAhJCh0YXJnZXQpLmhhc0NsYXNzKFN0YXRlLklTX09QRU5FRCkgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0YXJnZXQpLmF0dHIoJ2RhdGEtc2Nyb2xsdG9wJywgMCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGFyZ2V0KS5maW5kKFNlbGVjdG9yLk1PREFMX1dJTkRPVykuc2Nyb2xsVG9wKCAkKHRhcmdldCkuYXR0cignZGF0YS1zY3JvbGx0b3AnKSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHByZXZpdXMgPSAkKHRhcmdldCkuc2libGluZ3MoU2VsZWN0b3IuTU9EQUwgKyAnLicgKyBTdGF0ZS5JU19QUkVWSVVTKVswXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggJChwcmV2aXVzKS5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChwcmV2aXVzKS5hdHRyKCdkYXRhLXNjcm9sbHRvcCcsICQocHJldml1cykuZmluZChTZWxlY3Rvci5NT0RBTF9XSU5ET1cpLnNjcm9sbFRvcCgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkub2ZmKEV2ZW50LkNMSUNLX0NMT1NFKS5vbihFdmVudC5DTElDS19DTE9TRSwgU2VsZWN0b3IuTU9EQUxfQ0xPU0UsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNsb3NlKCAkKHRhcmdldCkgKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjbG9zZSA6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IGVsZW1lbnQgfHwgX3RoaXMuZWxlbWVudCxcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBwcmV2aXVzID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggISQodGFyZ2V0KS5oYXNDbGFzcyhTdGF0ZS5JU19PUEVORUQpIHx8ICQodGFyZ2V0KS5oYXNDbGFzcyhTdGF0ZS5JU19DTE9TRUQpIHx8ICQodGFyZ2V0KS5oYXNDbGFzcyhTdGF0ZS5JU19PUEVOSU5HKSB8fCAkKHRhcmdldCkuaGFzQ2xhc3MoU3RhdGUuSVNfQ0xPU0lORykgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5hZGRDbGFzcyhTdGF0ZS5JU19DTE9TSU5HKTtcclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5yZW1vdmVDbGFzcyhTdGF0ZS5JU19PUEVORUQpO1xyXG5cclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5yZW1vdmVDbGFzcyhTdGF0ZS5JU19BQ1RJVkUpO1xyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLnJlbW92ZUNsYXNzKFN0YXRlLklTX0NVUlJFTlQpO1xyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLnJlbW92ZUNsYXNzKFN0YXRlLklTX1BSRVZJVVMpO1xyXG5cclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5zaWJsaW5ncyhTZWxlY3Rvci5NT0RBTCArICcuJyArIFN0YXRlLklTX0FDVElWRSkubGFzdCgpLmFkZENsYXNzKFN0YXRlLklTX0NVUlJFTlQpO1xyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLnNpYmxpbmdzKFNlbGVjdG9yLk1PREFMICsgJy4nICsgU3RhdGUuSVNfQUNUSVZFKS5yZW1vdmVDbGFzcyhTdGF0ZS5JU19QUkVWSVVTKTtcclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5zaWJsaW5ncyhTZWxlY3Rvci5NT0RBTCArICcuJyArIFN0YXRlLklTX0NVUlJFTlQpLnByZXZBbGwoJy4nICsgU3RhdGUuSVNfQUNUSVZFKS5maXJzdCgpLmFkZENsYXNzKFN0YXRlLklTX1BSRVZJVVMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCBfdGhpcy50cmFuc2l0aW9uICkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGFyZ2V0KS50cmFuc2l0aW9uRW5kQWZ0ZXIodHJhbnNpdGlvbkNvbXBsZXRlLCBERUZBVUxUX0RVUkFUSU9OKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB0cmFuc2l0aW9uQ29tcGxldGUoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0YXJnZXQpLnJlbW92ZUNsYXNzKFN0YXRlLklTX0NMT1NJTkcpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGFyZ2V0KS5hZGRDbGFzcyhTdGF0ZS5JU19DTE9TRUQpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGFyZ2V0KS50cmlnZ2VyKEV2ZW50LkNMT1NFRCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKCAhJCh0YXJnZXQpLnNpYmxpbmdzKFNlbGVjdG9yLk1PREFMICsgJy4nICsgU3RhdGUuSVNfT1BFTkVEKS5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQuYm9keSkucmVtb3ZlQ2xhc3MoU3RhdGUuSVNfTU9EQUxfT1BFTik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5hdHRyKCdkYXRhLXNjcm9sbHRvcCcsIDApO1xyXG5cclxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSAkKHRhcmdldCkuc2libGluZ3MoU2VsZWN0b3IuTU9EQUwgKyAnLicgKyBTdGF0ZS5JU19DVVJSRU5UKVswXTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggJChjdXJyZW50KS5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChjdXJyZW50KS5hdHRyKCdkYXRhLXNjcm9sbHRvcCcsICQoY3VycmVudCkuZmluZChTZWxlY3Rvci5NT0RBTF9XSU5ET1cpLnNjcm9sbFRvcCgpKTtcclxuICAgICAgICAgICAgICAgICAgICAkKGN1cnJlbnQpLmZpbmQoU2VsZWN0b3IuTU9EQUxfV0lORE9XKS5zY3JvbGxUb3AoICQoY3VycmVudCkuYXR0cignZGF0YS1zY3JvbGx0b3AnKSApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHdpbmRvdykuc2Nyb2xsVG9wKF90aGlzLnNjcm9sbHRvcCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJC5mbi5tb2RhbCA9IGZ1bmN0aW9uKG9wdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkKHRoaXMpLmRhdGEoVUlfTkFNRSksXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kID0gKHR5cGVvZiBvcHRpb24gPT09ICdzdHJpbmcnKSAmJiBvcHRpb247XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoICFkYXRhICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBuZXcgTW9kYWwodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5kYXRhKFVJX05BTUUsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmKCBtZXRob2QgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVttZXRob2RdKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgIH0pKCk7XHJcblxyXG59KSh3aW5kb3cualF1ZXJ5LCB3aW5kb3cpO1xyXG4iXX0=
