"use strict";!function(s,t){t.DOCS=t.DOCS||{},s(function(){DOCS.menu.init()}),DOCS.menu={element:".docs-frame__menu",menuitem:".docs-frame__menu__item",viewer:".docs-frame__viewer",init:function(){var t=this;s(t.menuitem).each(function(){var e=s(this);s(this).children("a").filter("[href^=#]").length&&e.addClass("is-disabled"),e.hasClass("is-active")&&t.open(e)}),s(t.menuitem).on("click","> a",function(e){var i=s(e.delegateTarget);e.preventDefault(),t.open(i)})},open:function(t){var e=s(t);e.filter(".is-disabled").length||(this.close(e.siblings().filter(".is-active")),this.view(e),e.addClass("is-active"))},close:function(t){s(t).removeClass("is-active")},view:function(t){var e=s(t).children("a").attr("href");s(this.viewer).attr("src",e)}}}(window.jQuery,window),function(s,t){function e(){var s=document.createElement("fakeelement"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var e in t)if(void 0!==s.style[e])return t[e];return!1}var i=t.UI||{};t.UI=i,s(document).ready(function(){}),s.fn.transitionEndAfter=function(t,i){var a=this,n=!1,l=e();return s(this).one(l,function(){n=!0,t()}),setTimeout(function(){n||s(a).trigger(l)},i),this},i.tab=function(){var t={element:'[data-ui-tab="tab"]',panel:'[data-ui-tab="panel"]',open:function(s){var t=this._getTarget(s);t.item.hasClass("is-active")||(t.item.addClass("is-active"),t.panel.length&&t.panel.addClass("is-active"),this.close(t.item.siblings().filter(".is-active").children(this.element)))},close:function(s){var t=this._getTarget(s);t.item.hasClass("is-active")&&(t.item.removeClass("is-active"),t.panel.length&&t.panel.removeClass("is-active"))},_getTarget:function(t){var e={};return e.item=s(t).parent(),e.panel=s(this.panel).filter("#"+s(t).attr("aria-controls")),e}};return s(document).on("click",t.element,function(s){s.preventDefault(),t.open(this)}),t}(),i.modal=function(){var i={WRAPPER:".wrapper",MODAL:".modal",MODAL_WINDOW:".modal__window",MODAL_OPEN:'[data-ui-modal="open"]',MODAL_CLOSE:'[data-ui-modal="close"]'},a={IS_MODAL_OPEN:"modal-open",IS_OPENED:"is-opened",IS_OPENING:"is-opening",IS_CLOSED:"is-closed",IS_CLOSING:"is-closing",IS_CURRENT:"is-current",IS_ACTIVE:"is-active",IS_PREVIUS:"is-previus"},n={CLICK_OPEN:"click.modal:open",CLICK_CLOSE:"click.modal:close",OPENED:"modal:opened",CLOSED:"modal:closed"},l=function(s){this.element=s,this.scrolltop=null,this.transition=e()};l.prototype={open:function(e){var l=this,o=e||l.element,r=null;s(o).hasClass(a.IS_OPENED)||s(o).hasClass(a.IS_OPENING)||s(o).hasClass(a.IS_CLOSING)||(l.scrolltop=s(t).scrollTop(),s(document.body).hasClass(a.IS_MODAL_OPEN)||s(document.body).addClass(a.IS_MODAL_OPEN),document.body.appendChild(o),s(o)[0].offsetHeight,s(o).removeClass(a.IS_CLOSED),s(o).addClass(a.IS_OPENING),s(o).addClass(a.IS_ACTIVE),s(o).addClass(a.IS_CURRENT),s(o).removeClass(a.IS_PREVIUS),s(o).siblings(i.MODAL+"."+a.IS_ACTIVE).removeClass(a.IS_CURRENT),s(o).siblings(i.MODAL+"."+a.IS_ACTIVE).removeClass(a.IS_PREVIUS),s(o).siblings(i.MODAL+"."+a.IS_ACTIVE).last().addClass(a.IS_PREVIUS),l.transition&&s(o).transitionEndAfter(function(){s(o).removeClass(a.IS_OPENING),s(o).addClass(a.IS_OPENED),s(o).trigger(n.OPENED)},300),s(o).hasClass(a.IS_OPENED)?s(o).find(i.MODAL_WINDOW).scrollTop(s(o).attr("data-scrolltop")):s(o).attr("data-scrolltop",0),r=s(o).siblings(i.MODAL+"."+a.IS_PREVIUS)[0],s(r).length&&s(r).attr("data-scrolltop",s(r).find(i.MODAL_WINDOW).scrollTop()),s(o).off(n.CLICK_CLOSE).on(n.CLICK_CLOSE,i.MODAL_CLOSE,function(){l.close(s(o))}))},close:function(e){var l=e||this.element,o=null;!s(l).hasClass(a.IS_OPENED)||s(l).hasClass(a.IS_CLOSED)||s(l).hasClass(a.IS_OPENING)||s(l).hasClass(a.IS_CLOSING)||(s(l).addClass(a.IS_CLOSING),s(l).removeClass(a.IS_OPENED),s(l).removeClass(a.IS_ACTIVE),s(l).removeClass(a.IS_CURRENT),s(l).removeClass(a.IS_PREVIUS),s(l).siblings(i.MODAL+"."+a.IS_ACTIVE).last().addClass(a.IS_CURRENT),s(l).siblings(i.MODAL+"."+a.IS_ACTIVE).removeClass(a.IS_PREVIUS),s(l).siblings(i.MODAL+"."+a.IS_CURRENT).prevAll("."+a.IS_ACTIVE).first().addClass(a.IS_PREVIUS),this.transition&&s(l).transitionEndAfter(function(){s(l).removeClass(a.IS_CLOSING),s(l).addClass(a.IS_CLOSED),s(l).trigger(n.CLOSED),s(l).siblings(i.MODAL+"."+a.IS_OPENED).length||s(document.body).removeClass(a.IS_MODAL_OPEN)},300),s(l).attr("data-scrolltop",0),o=s(l).siblings(i.MODAL+"."+a.IS_CURRENT)[0],s(o).length?(s(o).attr("data-scrolltop",s(o).find(i.MODAL_WINDOW).scrollTop()),s(o).find(i.MODAL_WINDOW).scrollTop(s(o).attr("data-scrolltop"))):s(t).scrollTop(this.scrolltop))}},s.fn.modal=function(t){return this.each(function(){var e=s(this).data("UI.modal"),i="string"==typeof t&&t;e||(e=new l(this),s(this).data("UI.modal",e)),i&&e[i](this)})}}()}(window.jQuery,window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRvY3MuanMiLCJzY3JpcHQuanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsIkRPQ1MiLCJtZW51IiwiaW5pdCIsImVsZW1lbnQiLCJtZW51aXRlbSIsInZpZXdlciIsIl90aGlzIiwidGhpcyIsImVhY2giLCIkaXRlbSIsImNoaWxkcmVuIiwiZmlsdGVyIiwibGVuZ3RoIiwiYWRkQ2xhc3MiLCJoYXNDbGFzcyIsIm9wZW4iLCJvbiIsImUiLCJkZWxlZ2F0ZVRhcmdldCIsInByZXZlbnREZWZhdWx0IiwiJGVsZW1lbnQiLCJjbG9zZSIsInNpYmxpbmdzIiwidmlldyIsInJlbW92ZUNsYXNzIiwic3JjIiwiYXR0ciIsImpRdWVyeSIsImdldFRyYW5zaXRpb24iLCJmYWtlZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInRyYW5zaXRpb25FbmRFdmVudE5hbWUiLCJXZWJraXRUcmFuc2l0aW9uIiwiTW96VHJhbnNpdGlvbiIsIk9UcmFuc2l0aW9uIiwidHJhbnNpdGlvbiIsIm5hbWUiLCJ1bmRlZmluZWQiLCJzdHlsZSIsIlVJIiwicmVhZHkiLCJmbiIsInRyYW5zaXRpb25FbmRBZnRlciIsImNhbGxiYWNrIiwiZHVyYXRpb24iLCJjYWxsZWQiLCJ0cmFuc2l0aW9uZW5kIiwib25lIiwic2V0VGltZW91dCIsInRyaWdnZXIiLCJ0YWIiLCJwYW5lbCIsInRhcmdldCIsIl9nZXRUYXJnZXQiLCJpdGVtIiwicGFyZW50IiwibW9kYWwiLCJTZWxlY3RvciIsIldSQVBQRVIiLCJNT0RBTCIsIk1PREFMX1dJTkRPVyIsIk1PREFMX09QRU4iLCJNT0RBTF9DTE9TRSIsIlN0YXRlIiwiSVNfTU9EQUxfT1BFTiIsIklTX09QRU5FRCIsIklTX09QRU5JTkciLCJJU19DTE9TRUQiLCJJU19DTE9TSU5HIiwiSVNfQ1VSUkVOVCIsIklTX0FDVElWRSIsIklTX1BSRVZJVVMiLCJFdmVudCIsIkNMSUNLX09QRU4iLCJDTElDS19DTE9TRSIsIk9QRU5FRCIsIkNMT1NFRCIsIk1vZGFsIiwic2Nyb2xsdG9wIiwicHJvdG90eXBlIiwicHJldml1cyIsInNjcm9sbFRvcCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsIm9mZnNldEhlaWdodCIsImxhc3QiLCJmaW5kIiwib2ZmIiwiY3VycmVudCIsInByZXZBbGwiLCJmaXJzdCIsIm9wdGlvbiIsImRhdGEiLCJtZXRob2QiXSwibWFwcGluZ3MiOiJjQUFBLFNBQUFBLEVBQUFDLEdBSUFBLEVBQUFDLEtBQUFELEVBQUFDLFNBRUFGLEVBQUEsV0FDQUUsS0FBQUMsS0FBQUMsU0FJQUYsS0FBQUMsTUFDQUUsUUFBQSxvQkFDQUMsU0FBQSwwQkFDQUMsT0FBQSxzQkFDQUgsS0FBQSxXQUVBLElBQUFJLEVBQUFDLEtBRUFULEVBQUFRLEVBQUFGLFVBQUFJLEtBQUEsV0FFQSxJQUFBQyxFQUFBWCxFQUFBUyxNQUNBVCxFQUFBUyxNQUFBRyxTQUFBLEtBRUFDLE9BQUEsYUFBQUMsUUFDQUgsRUFBQUksU0FBQSxlQUdBSixFQUFBSyxTQUFBLGNBQ0FSLEVBQUFTLEtBQUFOLEtBSUFYLEVBQUFRLEVBQUFGLFVBQUFZLEdBQUEsUUFBQSxNQUFBLFNBQUFDLEdBRUEsSUFBQVIsRUFBQVgsRUFBQW1CLEVBQUFDLGdCQUVBRCxFQUFBRSxpQkFFQWIsRUFBQVMsS0FBQU4sTUFNQU0sS0FBQSxTQUFBWixHQUVBLElBQ0FpQixFQUFBdEIsRUFBQUssR0FFQWlCLEVBQUFULE9BQUEsZ0JBQUFDLFNBSEFMLEtBT0FjLE1BQUFELEVBQUFFLFdBQUFYLE9BQUEsZUFQQUosS0FRQWdCLEtBQUFILEdBRUFBLEVBQUFQLFNBQUEsZUFFQVEsTUFBQSxTQUFBbEIsR0FHQUwsRUFBQUssR0FFQXFCLFlBQUEsY0FFQUQsS0FBQSxTQUFBcEIsR0FFQSxJQUVBc0IsRUFEQTNCLEVBQUFLLEdBQUFPLFNBQUEsS0FDQWdCLEtBQUEsUUFFQTVCLEVBSkFTLEtBSUFGLFFBQUFxQixLQUFBLE1BQUFELEtBeEVBLENBNEVBMUIsT0FBQTRCLE9BQUE1QixRQzVFQSxTQUFB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QUFBdUQsR0FBQS9CLFNBQUFvQyxFQUFBRSxNQUFBLElBQUFJLEVBQUFNLFlBQUEsR0FFQXhFLEVBQUEyRixHQUFBN0UsUUFDQWQsRUFBQTJGLEdBQUEvRCxLQUFBLGlCQUFBNUIsRUFBQTJGLEdBQUFGLEtBQUE3QixFQUFBRyxjQUFBcUIsYUFDQXBGLEVBQUEyRixHQUFBRixLQUFBN0IsRUFBQUcsY0FBQXFCLFVBQUFwRixFQUFBMkYsR0FBQS9ELEtBQUEsb0JBRUE1QixFQUFBQyxHQUFBbUYsVUExQ0EzRSxLQTBDQXdFLGNBS0FqRixFQUFBNEMsR0FBQWUsTUFBQSxTQUFBbUMsR0FDQSxPQUFBckYsS0FBQUMsS0FBQSxXQUNBLElBQUFxRixFQUFBL0YsRUFBQVMsTUFBQXNGLEtBcEpBLFlBcUpBQyxFQUFBLGlCQUFBRixHQUFBQSxFQUVBQyxJQUNBQSxFQUFBLElBQUFmLEVBQUF2RSxNQUNBVCxFQUFBUyxNQUFBc0YsS0F6SkEsV0F5SkFBLElBR0FDLEdBQ0FELEVBQUFDLEdBQUF2RixTQS9KQSxHQXhKQSxDQTZUQVIsT0FBQTRCLE9BQUE1QiIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyI7KGZ1bmN0aW9uKCQsIHdpbmRvdykge1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB3aW5kb3cuRE9DUyA9IHdpbmRvdy5ET0NTIHx8IHt9O1xyXG5cclxuICAgICQoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgRE9DUy5tZW51LmluaXQoKTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBET0NTLm1lbnUgPSB7XHJcbiAgICAgICAgZWxlbWVudCA6ICcuZG9jcy1mcmFtZV9fbWVudScsXHJcbiAgICAgICAgbWVudWl0ZW0gOiAnLmRvY3MtZnJhbWVfX21lbnVfX2l0ZW0nLFxyXG4gICAgICAgIHZpZXdlciA6ICcuZG9jcy1mcmFtZV9fdmlld2VyJyxcclxuICAgICAgICBpbml0IDogZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgJChfdGhpcy5tZW51aXRlbSkuZWFjaChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgJGl0ZW0gPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgICAgICRhbmNob3IgPSAkKHRoaXMpLmNoaWxkcmVuKCdhJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoICRhbmNob3IuZmlsdGVyKCdbaHJlZl49I10nKS5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGl0ZW0uYWRkQ2xhc3MoJ2lzLWRpc2FibGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoICRpdGVtLmhhc0NsYXNzKCdpcy1hY3RpdmUnKSApIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vcGVuKCAkaXRlbSApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICQoX3RoaXMubWVudWl0ZW0pLm9uKCdjbGljaycsJz4gYScsIGZ1bmN0aW9uKGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgJGl0ZW0gPSAkKGUuZGVsZWdhdGVUYXJnZXQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5vcGVuKCAkaXRlbSApO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vX3RoaXMub3BlbiggJChfdGhpcy5tZW51aXRlbSkuZXEoMCkgKTtcclxuXHJcbiAgICAgICAgfSxcclxuICAgICAgICBvcGVuIDogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgaWYoICRlbGVtZW50LmZpbHRlcignLmlzLWRpc2FibGVkJykubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBfdGhpcy5jbG9zZSggJGVsZW1lbnQuc2libGluZ3MoKS5maWx0ZXIoJy5pcy1hY3RpdmUnKSApO1xyXG4gICAgICAgICAgICBfdGhpcy52aWV3KCAkZWxlbWVudCApO1xyXG5cclxuICAgICAgICAgICAgJGVsZW1lbnQuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2xvc2UgOiBmdW5jdGlvbiggZWxlbWVudCApIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAkZWxlbWVudCA9ICQoZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICAkZWxlbWVudC5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICB2aWV3IDogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgJGFuY2hvciA9ICQoZWxlbWVudCkuY2hpbGRyZW4oJ2EnKSxcclxuICAgICAgICAgICAgICAgIHNyYyA9ICRhbmNob3IuYXR0cignaHJlZicpO1xyXG5cclxuICAgICAgICAgICAgJChfdGhpcy52aWV3ZXIpLmF0dHIoJ3NyYycsIHNyYyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbn0pKHdpbmRvdy5qUXVlcnksIHdpbmRvdyk7IiwiOyhmdW5jdGlvbigkLCB3aW5kb3cpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIFVJID0gd2luZG93LlVJIHx8IHt9O1xyXG5cclxuICAgIHdpbmRvdy5VSSA9IFVJO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgICAqIFVJLnV0aWxcclxuICAgICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcbiAgICBmdW5jdGlvbiBnZXRTY3JvbGxiYXJXaWR0aCgpIHtcclxuICAgICAgICB2YXIgd2luZG93SW5uZXJXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG5cclxuICAgICAgICBpZiggIXdpbmRvd0lubmVyV2lkdGggKSB7XHJcblxyXG4gICAgICAgICAgdmFyIGRvY3VtZW50RWxlbWVudFJlY3QgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgICAgICAgd2luZG93SW5uZXJXaWR0aCA9IGRvY3VtZW50RWxlbWVudFJlY3QucmlnaHQgLSBNYXRoLmFicyhkb2N1bWVudEVsZW1lbnRSZWN0LmxlZnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHdpbmRvd0lubmVyV2lkdGggLSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRUcmFuc2l0aW9uKCkge1xyXG4gICAgICAgIHZhciBmYWtlZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zha2VlbGVtZW50JyksXHJcbiAgICAgICAgICAgIHRyYW5zaXRpb25FbmRFdmVudE5hbWUgPSB7XHJcbiAgICAgICAgICAgICAgICBXZWJraXRUcmFuc2l0aW9uIDogJ3dlYmtpdFRyYW5zaXRpb25FbmQnLFxyXG4gICAgICAgICAgICAgICAgTW96VHJhbnNpdGlvbiAgICA6ICd0cmFuc2l0aW9uZW5kJyxcclxuICAgICAgICAgICAgICAgIE9UcmFuc2l0aW9uICAgICAgOiAnb1RyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmQnLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbiAgICAgICA6ICd0cmFuc2l0aW9uZW5kJ1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciggdmFyIG5hbWUgaW4gdHJhbnNpdGlvbkVuZEV2ZW50TmFtZSApIHtcclxuICAgICAgICAgICAgaWYoIGZha2VlbGVtZW50LnN0eWxlW25hbWVdICE9PSB1bmRlZmluZWQgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNpdGlvbkVuZEV2ZW50TmFtZVtuYW1lXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgJC5mbi50cmFuc2l0aW9uRW5kQWZ0ZXIgPSBmdW5jdGlvbihjYWxsYmFjaywgZHVyYXRpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzLFxyXG4gICAgICAgICAgICBjYWxsZWQgPSBmYWxzZSxcclxuICAgICAgICAgICAgdHJhbnNpdGlvbmVuZCA9IGdldFRyYW5zaXRpb24oKTtcclxuXHJcbiAgICAgICAgJCh0aGlzKS5vbmUodHJhbnNpdGlvbmVuZCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiggIWNhbGxlZCApIHtcclxuICAgICAgICAgICAgICAgICQoX3RoaXMpLnRyaWdnZXIodHJhbnNpdGlvbmVuZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBkdXJhdGlvbik7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuXHJcblxyXG5cclxuXHJcbiAgICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgICogVUkudGFiXHJcbiAgICAgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG4gICAgVUkudGFiID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAvKnZhciBVSV9OQU1FID0gJ1VJLnRhYic7XHJcblxyXG4gICAgICAgIHZhciBTZWxlY3RvciA9IHtcclxuICAgICAgICAgICAgVEFCIDogJ1tkYXRhLXVpLXRhYj1cInRhYlwiXScsXHJcbiAgICAgICAgICAgIFBBTkVMIDogJ1tkYXRhLXVpLXRhYj1cInBhbmVsXCJdJyxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgU3RhdGUgPSB7XHJcbiAgICAgICAgICAgIElTX0FDVElWRSA6ICdhY3RpdmUnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIEV2ZW50ID0ge1xyXG4gICAgICAgICAgICBDTElDS19PUEVOIDogJ2NsaWNrLnRhYjpvcGVuJ1xyXG4gICAgICAgIH07Ki9cclxuXHJcbiAgICAgICAgdmFyIHRhYiA9IHtcclxuICAgICAgICAgICAgZWxlbWVudCA6ICdbZGF0YS11aS10YWI9XCJ0YWJcIl0nLFxyXG4gICAgICAgICAgICBwYW5lbCA6ICdbZGF0YS11aS10YWI9XCJwYW5lbFwiXScsXHJcbiAgICAgICAgICAgIG9wZW4gOiBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IF90aGlzLl9nZXRUYXJnZXQoIGVsZW1lbnQgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggdGFyZ2V0Lml0ZW0uaGFzQ2xhc3MoJ2lzLWFjdGl2ZScpICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0YXJnZXQuaXRlbS5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIHRhcmdldC5wYW5lbC5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnBhbmVsLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5jbG9zZSggdGFyZ2V0Lml0ZW0uc2libGluZ3MoKS5maWx0ZXIoJy5pcy1hY3RpdmUnKS5jaGlsZHJlbihfdGhpcy5lbGVtZW50KSApO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBjbG9zZSA6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gX3RoaXMuX2dldFRhcmdldCggZWxlbWVudCApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCAhdGFyZ2V0Lml0ZW0uaGFzQ2xhc3MoJ2lzLWFjdGl2ZScpICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0YXJnZXQuaXRlbS5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIHRhcmdldC5wYW5lbC5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnBhbmVsLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2dldFRhcmdldCA6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0ge307XHJcblxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0Lml0ZW0gPSAkKGVsZW1lbnQpLnBhcmVudCgpO1xyXG4gICAgICAgICAgICAgICAgdGFyZ2V0LnBhbmVsID0gJChfdGhpcy5wYW5lbCkuZmlsdGVyKCcjJyArICQoZWxlbWVudCkuYXR0cignYXJpYS1jb250cm9scycpKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgdGFiLmVsZW1lbnQsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgdGFiLm9wZW4oIHRoaXMgKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRhYjtcclxuICAgIH0pKCk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgICAqIFVJLm1vZGFsXHJcbiAgICAgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG4gICAgIFVJLm1vZGFsID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgVUlfTkFNRSA9ICdVSS5tb2RhbCcsXHJcbiAgICAgICAgICAgIERFRkFVTFRfRFVSQVRJT04gPSAzMDAsXHJcbiAgICAgICAgICAgIE9WRVJMQVlfRFVSQVRJT04gPSAzMDAsXHJcbiAgICAgICAgICAgIERFRkFVTFRfRUFTSU5HID0gJ3N3aW5nJyxcclxuICAgICAgICAgICAgT1ZFUkxBWV9FQVNJTkcgPSAnc3dpbmcnO1xyXG5cclxuICAgICAgICB2YXIgU2VsZWN0b3IgPSB7XHJcbiAgICAgICAgICAgIFdSQVBQRVIgICAgICAgICA6ICcud3JhcHBlcicsXHJcbiAgICAgICAgICAgIE1PREFMICAgICAgICAgICA6ICcubW9kYWwnLFxyXG4gICAgICAgICAgICBNT0RBTF9XSU5ET1cgICAgOiAnLm1vZGFsX193aW5kb3cnLFxyXG4gICAgICAgICAgICBNT0RBTF9PUEVOICAgICAgOiAnW2RhdGEtdWktbW9kYWw9XCJvcGVuXCJdJyxcclxuICAgICAgICAgICAgTU9EQUxfQ0xPU0UgICAgIDogJ1tkYXRhLXVpLW1vZGFsPVwiY2xvc2VcIl0nXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgU3RhdGUgPSB7XHJcbiAgICAgICAgICAgIElTX01PREFMX09QRU4gICA6ICdtb2RhbC1vcGVuJyxcclxuICAgICAgICAgICAgSVNfT1BFTkVEICAgICAgIDogJ2lzLW9wZW5lZCcsXHJcbiAgICAgICAgICAgIElTX09QRU5JTkcgICAgICA6ICdpcy1vcGVuaW5nJyxcclxuICAgICAgICAgICAgSVNfQ0xPU0VEICAgICAgIDogJ2lzLWNsb3NlZCcsXHJcbiAgICAgICAgICAgIElTX0NMT1NJTkcgICAgICA6ICdpcy1jbG9zaW5nJyxcclxuICAgICAgICAgICAgSVNfQ1VSUkVOVCAgICAgIDogJ2lzLWN1cnJlbnQnLFxyXG4gICAgICAgICAgICBJU19BQ1RJVkUgICAgICAgOiAnaXMtYWN0aXZlJyxcclxuICAgICAgICAgICAgSVNfUFJFVklVUyAgICAgIDogJ2lzLXByZXZpdXMnXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgRXZlbnQgPSB7XHJcbiAgICAgICAgICAgIENMSUNLX09QRU4gICAgICA6ICdjbGljay5tb2RhbDpvcGVuJyxcclxuICAgICAgICAgICAgQ0xJQ0tfQ0xPU0UgICAgIDogJ2NsaWNrLm1vZGFsOmNsb3NlJyxcclxuICAgICAgICAgICAgT1BFTkVEICAgICAgICAgIDogJ21vZGFsOm9wZW5lZCcsXHJcbiAgICAgICAgICAgIENMT1NFRCAgICAgICAgICA6ICdtb2RhbDpjbG9zZWQnXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgTW9kYWwgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsdG9wID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uID0gZ2V0VHJhbnNpdGlvbigpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIE1vZGFsLnByb3RvdHlwZSA9IHtcclxuICAgICAgICAgICAgb3BlbiA6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IGVsZW1lbnQgfHwgX3RoaXMuZWxlbWVudCxcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBwcmV2aXVzID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggKC8qJCh0YXJnZXQpLmhhc0NsYXNzKFN0YXRlLklTX0NVUlJFTlQpICYmICovJCh0YXJnZXQpLmhhc0NsYXNzKFN0YXRlLklTX09QRU5FRCkpIHx8ICQodGFyZ2V0KS5oYXNDbGFzcyhTdGF0ZS5JU19PUEVOSU5HKSB8fCAkKHRhcmdldCkuaGFzQ2xhc3MoU3RhdGUuSVNfQ0xPU0lORykgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIF90aGlzLnNjcm9sbHRvcCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggISQoZG9jdW1lbnQuYm9keSkuaGFzQ2xhc3MoU3RhdGUuSVNfTU9EQUxfT1BFTikgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudC5ib2R5KS5hZGRDbGFzcyhTdGF0ZS5JU19NT0RBTF9PUEVOKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCB0YXJnZXQgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldClbMF0ub2Zmc2V0SGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5yZW1vdmVDbGFzcyhTdGF0ZS5JU19DTE9TRUQpO1xyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLmFkZENsYXNzKFN0YXRlLklTX09QRU5JTkcpO1xyXG5cclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5hZGRDbGFzcyhTdGF0ZS5JU19BQ1RJVkUpO1xyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLmFkZENsYXNzKFN0YXRlLklTX0NVUlJFTlQpO1xyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLnJlbW92ZUNsYXNzKFN0YXRlLklTX1BSRVZJVVMpO1xyXG5cclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5zaWJsaW5ncyhTZWxlY3Rvci5NT0RBTCArICcuJyArIFN0YXRlLklTX0FDVElWRSkucmVtb3ZlQ2xhc3MoU3RhdGUuSVNfQ1VSUkVOVCk7XHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkuc2libGluZ3MoU2VsZWN0b3IuTU9EQUwgKyAnLicgKyBTdGF0ZS5JU19BQ1RJVkUpLnJlbW92ZUNsYXNzKFN0YXRlLklTX1BSRVZJVVMpO1xyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLnNpYmxpbmdzKFNlbGVjdG9yLk1PREFMICsgJy4nICsgU3RhdGUuSVNfQUNUSVZFKS5sYXN0KCkuYWRkQ2xhc3MoU3RhdGUuSVNfUFJFVklVUyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIF90aGlzLnRyYW5zaXRpb24gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0YXJnZXQpLnRyYW5zaXRpb25FbmRBZnRlcih0cmFuc2l0aW9uQ29tcGxldGUsIERFRkFVTFRfRFVSQVRJT04pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHRyYW5zaXRpb25Db21wbGV0ZSgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRhcmdldCkucmVtb3ZlQ2xhc3MoU3RhdGUuSVNfT1BFTklORyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0YXJnZXQpLmFkZENsYXNzKFN0YXRlLklTX09QRU5FRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0YXJnZXQpLnRyaWdnZXIoRXZlbnQuT1BFTkVEKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiggISQodGFyZ2V0KS5oYXNDbGFzcyhTdGF0ZS5JU19PUEVORUQpICkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGFyZ2V0KS5hdHRyKCdkYXRhLXNjcm9sbHRvcCcsIDApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRhcmdldCkuZmluZChTZWxlY3Rvci5NT0RBTF9XSU5ET1cpLnNjcm9sbFRvcCggJCh0YXJnZXQpLmF0dHIoJ2RhdGEtc2Nyb2xsdG9wJykgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBwcmV2aXVzID0gJCh0YXJnZXQpLnNpYmxpbmdzKFNlbGVjdG9yLk1PREFMICsgJy4nICsgU3RhdGUuSVNfUFJFVklVUylbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoICQocHJldml1cykubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgICAgICQocHJldml1cykuYXR0cignZGF0YS1zY3JvbGx0b3AnLCAkKHByZXZpdXMpLmZpbmQoU2VsZWN0b3IuTU9EQUxfV0lORE9XKS5zY3JvbGxUb3AoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLm9mZihFdmVudC5DTElDS19DTE9TRSkub24oRXZlbnQuQ0xJQ0tfQ0xPU0UsIFNlbGVjdG9yLk1PREFMX0NMT1NFLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jbG9zZSggJCh0YXJnZXQpICk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2xvc2UgOiBmdW5jdGlvbihlbGVtZW50KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSBlbGVtZW50IHx8IF90aGlzLmVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJldml1cyA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoICEkKHRhcmdldCkuaGFzQ2xhc3MoU3RhdGUuSVNfT1BFTkVEKSB8fCAkKHRhcmdldCkuaGFzQ2xhc3MoU3RhdGUuSVNfQ0xPU0VEKSB8fCAkKHRhcmdldCkuaGFzQ2xhc3MoU3RhdGUuSVNfT1BFTklORykgfHwgJCh0YXJnZXQpLmhhc0NsYXNzKFN0YXRlLklTX0NMT1NJTkcpICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkuYWRkQ2xhc3MoU3RhdGUuSVNfQ0xPU0lORyk7XHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkucmVtb3ZlQ2xhc3MoU3RhdGUuSVNfT1BFTkVEKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkucmVtb3ZlQ2xhc3MoU3RhdGUuSVNfQUNUSVZFKTtcclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5yZW1vdmVDbGFzcyhTdGF0ZS5JU19DVVJSRU5UKTtcclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5yZW1vdmVDbGFzcyhTdGF0ZS5JU19QUkVWSVVTKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkuc2libGluZ3MoU2VsZWN0b3IuTU9EQUwgKyAnLicgKyBTdGF0ZS5JU19BQ1RJVkUpLmxhc3QoKS5hZGRDbGFzcyhTdGF0ZS5JU19DVVJSRU5UKTtcclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5zaWJsaW5ncyhTZWxlY3Rvci5NT0RBTCArICcuJyArIFN0YXRlLklTX0FDVElWRSkucmVtb3ZlQ2xhc3MoU3RhdGUuSVNfUFJFVklVUyk7XHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkuc2libGluZ3MoU2VsZWN0b3IuTU9EQUwgKyAnLicgKyBTdGF0ZS5JU19DVVJSRU5UKS5wcmV2QWxsKCcuJyArIFN0YXRlLklTX0FDVElWRSkuZmlyc3QoKS5hZGRDbGFzcyhTdGF0ZS5JU19QUkVWSVVTKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggX3RoaXMudHJhbnNpdGlvbiApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRhcmdldCkudHJhbnNpdGlvbkVuZEFmdGVyKHRyYW5zaXRpb25Db21wbGV0ZSwgREVGQVVMVF9EVVJBVElPTik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdHJhbnNpdGlvbkNvbXBsZXRlKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGFyZ2V0KS5yZW1vdmVDbGFzcyhTdGF0ZS5JU19DTE9TSU5HKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRhcmdldCkuYWRkQ2xhc3MoU3RhdGUuSVNfQ0xPU0VEKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRhcmdldCkudHJpZ2dlcihFdmVudC5DTE9TRUQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiggISQodGFyZ2V0KS5zaWJsaW5ncyhTZWxlY3Rvci5NT0RBTCArICcuJyArIFN0YXRlLklTX09QRU5FRCkubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50LmJvZHkpLnJlbW92ZUNsYXNzKFN0YXRlLklTX01PREFMX09QRU4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkuYXR0cignZGF0YS1zY3JvbGx0b3AnLCAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gJCh0YXJnZXQpLnNpYmxpbmdzKFNlbGVjdG9yLk1PREFMICsgJy4nICsgU3RhdGUuSVNfQ1VSUkVOVClbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoICQoY3VycmVudCkubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoY3VycmVudCkuYXR0cignZGF0YS1zY3JvbGx0b3AnLCAkKGN1cnJlbnQpLmZpbmQoU2VsZWN0b3IuTU9EQUxfV0lORE9XKS5zY3JvbGxUb3AoKSlcclxuICAgICAgICAgICAgICAgICAgICAkKGN1cnJlbnQpLmZpbmQoU2VsZWN0b3IuTU9EQUxfV0lORE9XKS5zY3JvbGxUb3AoICQoY3VycmVudCkuYXR0cignZGF0YS1zY3JvbGx0b3AnKSApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHdpbmRvdykuc2Nyb2xsVG9wKF90aGlzLnNjcm9sbHRvcCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgJC5mbi5tb2RhbCA9IGZ1bmN0aW9uKG9wdGlvbikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSAkKHRoaXMpLmRhdGEoVUlfTkFNRSksXHJcbiAgICAgICAgICAgICAgICAgICAgbWV0aG9kID0gKHR5cGVvZiBvcHRpb24gPT09ICdzdHJpbmcnKSAmJiBvcHRpb247XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoICFkYXRhICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgPSBuZXcgTW9kYWwodGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5kYXRhKFVJX05BTUUsIGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmKCBtZXRob2QgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVttZXRob2RdKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgIH0pKCk7XHJcblxyXG59KSh3aW5kb3cualF1ZXJ5LCB3aW5kb3cpOyJdfQ==
