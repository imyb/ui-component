"use strict";!function(t,s){s.DOCS=s.DOCS||{},t(function(){DOCS.menu.init()}),DOCS.menu={element:".docs-frame__menu",menuitem:".docs-frame__menu__item",viewer:".docs-frame__viewer",init:function(){var s=this;t(s.menuitem).each(function(){var i=t(this);t(this).children("a").filter("[href^=#]").length&&i.addClass("is-disabled"),i.hasClass("is-active")&&s.open(i)}),t(s.menuitem).on("click","> a",function(i){var e=t(i.delegateTarget);i.preventDefault(),s.open(e)})},open:function(s){var i=t(s);i.filter(".is-disabled").length||(this.close(i.siblings().filter(".is-active")),this.view(i),i.addClass("is-active"))},close:function(s){t(s).removeClass("is-active")},view:function(s){var i=t(s).children("a").attr("href");t(this.viewer).attr("src",i)}}}(window.jQuery,window),function(t,s){function i(){var t=document.createElement("fakeelement"),s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in s)if(void 0!==t.style[i])return s[i];return!1}var e=s.UI||{};s.UI=e,t(document).ready(function(){}),t.fn.transitionEndAfter=function(s,e){var n=this,a=!1,o=i();return t(this).one(o,function(){a=!0,s()}),setTimeout(function(){a||t(n).trigger(o)},e),this},e.tab=function(){var s='[data-ui-tab="tab"]',i='[data-ui-tab="panel"]',e={handleTabClick:function(t){t=t[0]||t;this.open(t)},open:function(t){var s=function(t){for(var s=[],i=t.parentNode.firstChild;i;i=i.nextSibling)1===i.nodeType&&i!==t&&s.push(i);return s}((t=t[0]||t).parentElement),i=this._getTarget(t);if(!i.item.classList.contains("is-active")){i.item.classList.add("is-active"),i.panel&&i.panel.classList.add("is-active");for(var e in s)this.close(s[e].childNodes[0])}},close:function(t){var s=this._getTarget(t);s.item.classList.contains("is-active")&&s.item.classList.remove("is-active"),s.panel&&s.panel.classList.contains("is-active")&&s.panel.classList.remove("is-active")},_getTarget:function(t){var s={};return s.item=t.parentElement,s.panel=document.querySelector(i+"#"+t.getAttribute("aria-controls")),s}};return t(document).on("click.tab:open",s,function(t){t.preventDefault(),e.handleTabClick(this)}),e}(),e.modal=function(){var e={WRAPPER:".wrapper",MODAL:".modal",MODAL_WINDOW:".modal__window",MODAL_OPEN:'[data-ui-modal="open"]',MODAL_CLOSE:'[data-ui-modal="close"]'},n={IS_MODAL_OPEN:"modal-open",IS_OPENED:"is-opened",IS_OPENING:"is-opening",IS_CLOSED:"is-closed",IS_CLOSING:"is-closing",IS_CURRENT:"is-current",IS_ACTIVE:"is-active",IS_PREVIUS:"is-previus"},a={CLICK_OPEN:"click.modal:open",CLICK_CLOSE:"click.modal:close",OPENED:"modal:opened",CLOSED:"modal:closed"},o=function(t){this.element=t,this.scrolltop=null,this.transition=i()};o.prototype={open:function(i){var o=this,l=i||o.element,r=null;t(l).hasClass(n.IS_OPENED)||t(l).hasClass(n.IS_OPENING)||t(l).hasClass(n.IS_CLOSING)||(o.scrolltop=t(s).scrollTop(),t(document.body).hasClass(n.IS_MODAL_OPEN)||t(document.body).addClass(n.IS_MODAL_OPEN),document.body.appendChild(l),t(l)[0].offsetHeight,t(l).removeClass(n.IS_CLOSED),t(l).addClass(n.IS_OPENING),t(l).addClass(n.IS_ACTIVE),t(l).addClass(n.IS_CURRENT),t(l).removeClass(n.IS_PREVIUS),t(l).siblings(e.MODAL+"."+n.IS_ACTIVE).removeClass(n.IS_CURRENT),t(l).siblings(e.MODAL+"."+n.IS_ACTIVE).removeClass(n.IS_PREVIUS),t(l).siblings(e.MODAL+"."+n.IS_ACTIVE).last().addClass(n.IS_PREVIUS),o.transition&&t(l).transitionEndAfter(function(){t(l).removeClass(n.IS_OPENING),t(l).addClass(n.IS_OPENED),t(l).trigger(a.OPENED)},300),t(l).hasClass(n.IS_OPENED)?t(l).find(e.MODAL_WINDOW).scrollTop(t(l).attr("data-scrolltop")):t(l).attr("data-scrolltop",0),r=t(l).siblings(e.MODAL+"."+n.IS_PREVIUS)[0],t(r).length&&t(r).attr("data-scrolltop",t(r).find(e.MODAL_WINDOW).scrollTop()),t(l).off(a.CLICK_CLOSE).on(a.CLICK_CLOSE,e.MODAL_CLOSE,function(){o.close(t(l))}))},close:function(i){var o=i||this.element,l=null;!t(o).hasClass(n.IS_OPENED)||t(o).hasClass(n.IS_CLOSED)||t(o).hasClass(n.IS_OPENING)||t(o).hasClass(n.IS_CLOSING)||(t(o).addClass(n.IS_CLOSING),t(o).removeClass(n.IS_OPENED),t(o).removeClass(n.IS_ACTIVE),t(o).removeClass(n.IS_CURRENT),t(o).removeClass(n.IS_PREVIUS),t(o).siblings(e.MODAL+"."+n.IS_ACTIVE).last().addClass(n.IS_CURRENT),t(o).siblings(e.MODAL+"."+n.IS_ACTIVE).removeClass(n.IS_PREVIUS),t(o).siblings(e.MODAL+"."+n.IS_CURRENT).prevAll("."+n.IS_ACTIVE).first().addClass(n.IS_PREVIUS),this.transition&&t(o).transitionEndAfter(function(){t(o).removeClass(n.IS_CLOSING),t(o).addClass(n.IS_CLOSED),t(o).trigger(a.CLOSED),t(o).siblings(e.MODAL+"."+n.IS_OPENED).length||t(document.body).removeClass(n.IS_MODAL_OPEN)},300),t(o).attr("data-scrolltop",0),l=t(o).siblings(e.MODAL+"."+n.IS_CURRENT)[0],t(l).length?(t(l).attr("data-scrolltop",t(l).find(e.MODAL_WINDOW).scrollTop()),t(l).find(e.MODAL_WINDOW).scrollTop(t(l).attr("data-scrolltop"))):t(s).scrollTop(this.scrolltop))}},t.fn.modal=function(s){return this.each(function(){var i=t(this).data("UI.modal"),e="string"==typeof s&&s;i||(i=new o(this),t(this).data("UI.modal",i)),e&&i[e](this)})}}()}(window.jQuery,window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRvY3MuanMiLCJzY3JpcHQuanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsIkRPQ1MiLCJtZW51IiwiaW5pdCIsImVsZW1lbnQiLCJtZW51aXRlbSIsInZpZXdlciIsIl90aGlzIiwidGhpcyIsImVhY2giLCIkaXRlbSIsImNoaWxkcmVuIiwiZmlsdGVyIiwibGVuZ3RoIiwiYWRkQ2xhc3MiLCJoYXNDbGFzcyIsIm9wZW4iLCJvbiIsImUiLCJkZWxlZ2F0ZVRhcmdldCIsInByZXZlbnREZWZhdWx0IiwiJGVsZW1lbnQiLCJjbG9zZSIsInNpYmxpbmdzIiwidmlldyIsInJlbW92ZUNsYXNzIiwic3JjIiwiYXR0ciIsImpRdWVyeSIsImdldFRyYW5zaXRpb24iLCJmYWtlZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInRyYW5zaXRpb25FbmRFdmVudE5hbWUiLCJXZWJraXRUcmFuc2l0aW9uIiwiTW96VHJhbnNpdGlvbiIsIk9UcmFuc2l0aW9uIiwidHJhbnNpdGlvbiIsIm5hbWUiLCJ1bmRlZmluZWQiLCJzdHlsZSIsIlVJIiwicmVhZHkiLCJmbiIsInRyYW5zaXRpb25FbmRBZnRlciIsImNhbGxiYWNrIiwiZHVyYXRpb24iLCJjYWxsZWQiLCJ0cmFuc2l0aW9uZW5kIiwib25lIiwic2V0VGltZW91dCIsInRyaWdnZXIiLCJ0YWIiLCJTRUxFQ1RPUiIsImhhbmRsZVRhYkNsaWNrIiwic2libGluZyIsInBhcmVudE5vZGUiLCJmaXJzdENoaWxkIiwibmV4dFNpYmxpbmciLCJub2RlVHlwZSIsInB1c2giLCJnZXRTaWJsaW5ncyIsInBhcmVudEVsZW1lbnQiLCJ0YXJnZXQiLCJfZ2V0VGFyZ2V0IiwiaXRlbSIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiYWRkIiwicGFuZWwiLCJpIiwiY2hpbGROb2RlcyIsInJlbW92ZSIsInF1ZXJ5U2VsZWN0b3IiLCJnZXRBdHRyaWJ1dGUiLCJtb2RhbCIsIlNlbGVjdG9yIiwiV1JBUFBFUiIsIk1PREFMIiwiTU9EQUxfV0lORE9XIiwiTU9EQUxfT1BFTiIsIk1PREFMX0NMT1NFIiwiU3RhdGUiLCJJU19NT0RBTF9PUEVOIiwiSVNfT1BFTkVEIiwiSVNfT1BFTklORyIsIklTX0NMT1NFRCIsIklTX0NMT1NJTkciLCJJU19DVVJSRU5UIiwiSVNfQUNUSVZFIiwiSVNfUFJFVklVUyIsIkV2ZW50IiwiQ0xJQ0tfT1BFTiIsIkNMSUNLX0NMT1NFIiwiT1BFTkVEIiwiQ0xPU0VEIiwiTW9kYWwiLCJzY3JvbGx0b3AiLCJwcm90b3R5cGUiLCJwcmV2aXVzIiwic2Nyb2xsVG9wIiwiYm9keSIsImFwcGVuZENoaWxkIiwib2Zmc2V0SGVpZ2h0IiwibGFzdCIsImZpbmQiLCJvZmYiLCJjdXJyZW50IiwicHJldkFsbCIsImZpcnN0Iiwib3B0aW9uIiwiZGF0YSIsIm1ldGhvZCJdLCJtYXBwaW5ncyI6ImNBQUEsU0FBQUEsRUFBQUMsR0FJQUEsRUFBQUMsS0FBQUQsRUFBQUMsU0FFQUYsRUFBQSxXQUNBRSxLQUFBQyxLQUFBQyxTQUlBRixLQUFBQyxNQUNBRSxRQUFBLG9CQUNBQyxTQUFBLDBCQUNBQyxPQUFBLHNCQUNBSCxLQUFBLFdBRUEsSUFBQUksRUFBQUMsS0FFQVQsRUFBQVEsRUFBQUYsVUFBQUksS0FBQSxXQUVBLElBQUFDLEVBQUFYLEVBQUFTLE1BQ0FULEVBQUFTLE1BQUFHLFNBQUEsS0FFQUMsT0FBQSxhQUFBQyxRQUNBSCxFQUFBSSxTQUFBLGVBR0FKLEVBQUFLLFNBQUEsY0FDQVIsRUFBQVMsS0FBQU4sS0FJQVgsRUFBQVEsRUFBQUYsVUFBQVksR0FBQSxRQUFBLE1BQUEsU0FBQUMsR0FFQSxJQUFBUixFQUFBWCxFQUFBbUIsRUFBQUMsZ0JBRUFELEVBQUFFLGlCQUVBYixFQUFBUyxLQUFBTixNQU1BTSxLQUFBLFNBQUFaLEdBRUEsSUFDQWlCLEVBQUF0QixFQUFBSyxHQUVBaUIsRUFBQVQsT0FBQSxnQkFBQUMsU0FIQUwsS0FPQWMsTUFBQUQsRUFBQUUsV0FBQVgsT0FBQSxlQVBBSixLQVFBZ0IsS0FB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R0FDQUQsRUFBQUMsR0FBQXhHLFNBL0pBLEdBM05BLENBZ1lBUixPQUFBNEIsT0FBQTVCIiwiZmlsZSI6ImJ1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIjsoZnVuY3Rpb24oJCwgd2luZG93KSB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIHdpbmRvdy5ET0NTID0gd2luZG93LkRPQ1MgfHwge307XHJcblxyXG4gICAgJChmdW5jdGlvbigpIHtcclxuICAgICAgICBET0NTLm1lbnUuaW5pdCgpO1xyXG4gICAgfSk7XHJcblxyXG5cclxuICAgIERPQ1MubWVudSA9IHtcclxuICAgICAgICBlbGVtZW50IDogJy5kb2NzLWZyYW1lX19tZW51JyxcclxuICAgICAgICBtZW51aXRlbSA6ICcuZG9jcy1mcmFtZV9fbWVudV9faXRlbScsXHJcbiAgICAgICAgdmlld2VyIDogJy5kb2NzLWZyYW1lX192aWV3ZXInLFxyXG4gICAgICAgIGluaXQgOiBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcblxyXG4gICAgICAgICAgICAkKF90aGlzLm1lbnVpdGVtKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciAkaXRlbSA9ICQodGhpcyksXHJcbiAgICAgICAgICAgICAgICAgICAgJGFuY2hvciA9ICQodGhpcykuY2hpbGRyZW4oJ2EnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggJGFuY2hvci5maWx0ZXIoJ1tocmVmXj0jXScpLmxlbmd0aCApIHtcclxuICAgICAgICAgICAgICAgICAgICAkaXRlbS5hZGRDbGFzcygnaXMtZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiggJGl0ZW0uaGFzQ2xhc3MoJ2lzLWFjdGl2ZScpICkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLm9wZW4oICRpdGVtICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgJChfdGhpcy5tZW51aXRlbSkub24oJ2NsaWNrJywnPiBhJywgZnVuY3Rpb24oZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciAkaXRlbSA9ICQoZS5kZWxlZ2F0ZVRhcmdldCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIF90aGlzLm9wZW4oICRpdGVtICk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy9fdGhpcy5vcGVuKCAkKF90aGlzLm1lbnVpdGVtKS5lcSgwKSApO1xyXG5cclxuICAgICAgICB9LFxyXG4gICAgICAgIG9wZW4gOiBmdW5jdGlvbiggZWxlbWVudCApIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAkZWxlbWVudCA9ICQoZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICBpZiggJGVsZW1lbnQuZmlsdGVyKCcuaXMtZGlzYWJsZWQnKS5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIF90aGlzLmNsb3NlKCAkZWxlbWVudC5zaWJsaW5ncygpLmZpbHRlcignLmlzLWFjdGl2ZScpICk7XHJcbiAgICAgICAgICAgIF90aGlzLnZpZXcoICRlbGVtZW50ICk7XHJcblxyXG4gICAgICAgICAgICAkZWxlbWVudC5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBjbG9zZSA6IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xyXG5cclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICRlbGVtZW50ID0gJChlbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgICRlbGVtZW50LnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHZpZXcgOiBmdW5jdGlvbiggZWxlbWVudCApIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAkYW5jaG9yID0gJChlbGVtZW50KS5jaGlsZHJlbignYScpLFxyXG4gICAgICAgICAgICAgICAgc3JjID0gJGFuY2hvci5hdHRyKCdocmVmJyk7XHJcblxyXG4gICAgICAgICAgICAkKF90aGlzLnZpZXdlcikuYXR0cignc3JjJywgc3JjKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxufSkod2luZG93LmpRdWVyeSwgd2luZG93KTsiLCJcclxuOyhmdW5jdGlvbigkLCB3aW5kb3cpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgdmFyIFVJID0gd2luZG93LlVJIHx8IHt9O1xyXG5cclxuICAgIHdpbmRvdy5VSSA9IFVJO1xyXG5cclxuICAgICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uKCl7XHJcblxyXG4gICAgfSk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgICAqIFVJLnV0aWxcclxuICAgICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcbiAgICBmdW5jdGlvbiBnZXRTY3JvbGxiYXJXaWR0aCgpIHtcclxuICAgICAgICB2YXIgd2luZG93SW5uZXJXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xyXG5cclxuICAgICAgICBpZiggIXdpbmRvd0lubmVyV2lkdGggKSB7XHJcblxyXG4gICAgICAgICAgdmFyIGRvY3VtZW50RWxlbWVudFJlY3QgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcblxyXG4gICAgICAgICAgd2luZG93SW5uZXJXaWR0aCA9IGRvY3VtZW50RWxlbWVudFJlY3QucmlnaHQgLSBNYXRoLmFicyhkb2N1bWVudEVsZW1lbnRSZWN0LmxlZnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHdpbmRvd0lubmVyV2lkdGggLSBkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRUcmFuc2l0aW9uKCkge1xyXG4gICAgICAgIHZhciBmYWtlZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zha2VlbGVtZW50JyksXHJcbiAgICAgICAgICAgIHRyYW5zaXRpb25FbmRFdmVudE5hbWUgPSB7XHJcbiAgICAgICAgICAgICAgICBXZWJraXRUcmFuc2l0aW9uIDogJ3dlYmtpdFRyYW5zaXRpb25FbmQnLFxyXG4gICAgICAgICAgICAgICAgTW96VHJhbnNpdGlvbiAgICA6ICd0cmFuc2l0aW9uZW5kJyxcclxuICAgICAgICAgICAgICAgIE9UcmFuc2l0aW9uICAgICAgOiAnb1RyYW5zaXRpb25FbmQgb3RyYW5zaXRpb25lbmQnLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNpdGlvbiAgICAgICA6ICd0cmFuc2l0aW9uZW5kJ1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICBmb3IoIHZhciBuYW1lIGluIHRyYW5zaXRpb25FbmRFdmVudE5hbWUgKSB7XHJcbiAgICAgICAgICAgIGlmKCBmYWtlZWxlbWVudC5zdHlsZVtuYW1lXSAhPT0gdW5kZWZpbmVkICkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zaXRpb25FbmRFdmVudE5hbWVbbmFtZV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgJC5mbi50cmFuc2l0aW9uRW5kQWZ0ZXIgPSBmdW5jdGlvbihjYWxsYmFjaywgZHVyYXRpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzLFxyXG4gICAgICAgICAgICBjYWxsZWQgPSBmYWxzZSxcclxuICAgICAgICAgICAgdHJhbnNpdGlvbmVuZCA9IGdldFRyYW5zaXRpb24oKTtcclxuXHJcbiAgICAgICAgJCh0aGlzKS5vbmUodHJhbnNpdGlvbmVuZCwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGNhbGxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIGNhbGxiYWNrKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiggIWNhbGxlZCApIHtcclxuICAgICAgICAgICAgICAgICQoX3RoaXMpLnRyaWdnZXIodHJhbnNpdGlvbmVuZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LCBkdXJhdGlvbik7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfTtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0U2libGluZ3MoZWxlbWVudCkge1xyXG4gICAgICAgIHZhciBzaWJsaW5ncyA9IFtdO1xyXG4gICAgICAgIHZhciBzaWJsaW5nID0gZWxlbWVudC5wYXJlbnROb2RlLmZpcnN0Q2hpbGQ7XHJcbiAgICAgICAgZm9yICg7IHNpYmxpbmc7IHNpYmxpbmcgPSBzaWJsaW5nLm5leHRTaWJsaW5nKSB7XHJcbiAgICAgICAgICAgIGlmIChzaWJsaW5nLm5vZGVUeXBlICE9PSAxIHx8IHNpYmxpbmcgPT09IGVsZW1lbnQpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICBzaWJsaW5ncy5wdXNoKHNpYmxpbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2libGluZ3M7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICAgKiBVSS50YWJcclxuICAgICAqID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09ICovXHJcbiAgICBVSS50YWIgPSAoZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgIHZhciBVSV9OQU1FID0gJ1VJLnRhYic7XHJcblxyXG4gICAgICAgIHZhciBTRUxFQ1RPUiA9IHtcclxuICAgICAgICAgICAgVEFCIDogJ1tkYXRhLXVpLXRhYj1cInRhYlwiXScsXHJcbiAgICAgICAgICAgIFBBTkVMIDogJ1tkYXRhLXVpLXRhYj1cInBhbmVsXCJdJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBTVEFURSA9IHtcclxuICAgICAgICAgICAgSVNfQUNUSVZFIDogJ2FjdGl2ZSdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgRVZFTlQgPSB7XHJcbiAgICAgICAgICAgIENMSUNLX09QRU4gOiAnY2xpY2sudGFiOm9wZW4nXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIHRhYiA9IHtcclxuICAgICAgICAgICAgaGFuZGxlVGFiQ2xpY2sgOiBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50WzBdIHx8IGVsZW1lbnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBvcGVuIDogZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudFswXSB8fCBlbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgdmFyIHNpYmxpbmdzID0gZ2V0U2libGluZ3MoZWxlbWVudC5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLl9nZXRUYXJnZXQoZWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIHRhcmdldC5pdGVtLmNsYXNzTGlzdC5jb250YWlucygnaXMtYWN0aXZlJykgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRhcmdldC5pdGVtLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCB0YXJnZXQucGFuZWwgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnBhbmVsLmNsYXNzTGlzdC5hZGQoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZvciggdmFyIGkgaW4gc2libGluZ3MgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2xvc2Uoc2libGluZ3NbaV0uY2hpbGROb2Rlc1swXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNsb3NlIDogZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMuX2dldFRhcmdldChlbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggdGFyZ2V0Lml0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1hY3RpdmUnKSApIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQuaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiggdGFyZ2V0LnBhbmVsICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCB0YXJnZXQucGFuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1hY3RpdmUnKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnBhbmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2dldFRhcmdldCA6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSB7fTtcclxuXHJcbiAgICAgICAgICAgICAgICB0YXJnZXQuaXRlbSA9IGVsZW1lbnQucGFyZW50RWxlbWVudDtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5wYW5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoU0VMRUNUT1IuUEFORUwgKyAnIycrIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLWNvbnRyb2xzJykpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkKGRvY3VtZW50KS5vbihFVkVOVC5DTElDS19PUEVOLCBTRUxFQ1RPUi5UQUIsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgdGFiLmhhbmRsZVRhYkNsaWNrKHRoaXMpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGFiO1xyXG5cclxuICAgICAgICAvKnZhciB0YWIgPSB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQgOiAnW2RhdGEtdWktdGFiPVwidGFiXCJdJyxcclxuICAgICAgICAgICAgcGFuZWwgOiAnW2RhdGEtdWktdGFiPVwicGFuZWxcIl0nLFxyXG4gICAgICAgICAgICBvcGVuIDogZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBfdGhpcy5fZ2V0VGFyZ2V0KCBlbGVtZW50ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIHRhcmdldC5pdGVtLmhhc0NsYXNzKCdpcy1hY3RpdmUnKSApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0Lml0ZW0uYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCB0YXJnZXQucGFuZWwubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5wYW5lbC5hZGRDbGFzcygnaXMtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgX3RoaXMuY2xvc2UoIHRhcmdldC5pdGVtLnNpYmxpbmdzKCkuZmlsdGVyKCcuaXMtYWN0aXZlJykuY2hpbGRyZW4oX3RoaXMuZWxlbWVudCkgKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2xvc2UgOiBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IF90aGlzLl9nZXRUYXJnZXQoIGVsZW1lbnQgKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggIXRhcmdldC5pdGVtLmhhc0NsYXNzKCdpcy1hY3RpdmUnKSApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0Lml0ZW0ucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCB0YXJnZXQucGFuZWwubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldC5wYW5lbC5yZW1vdmVDbGFzcygnaXMtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIF9nZXRUYXJnZXQgOiBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IHt9O1xyXG5cclxuICAgICAgICAgICAgICAgIHRhcmdldC5pdGVtID0gJChlbGVtZW50KS5wYXJlbnQoKTtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5wYW5lbCA9ICQoX3RoaXMucGFuZWwpLmZpbHRlcignIycgKyAkKGVsZW1lbnQpLmF0dHIoJ2FyaWEtY29udHJvbHMnKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsIHRhYi5lbGVtZW50LCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIHRhYi5vcGVuKCB0aGlzICk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0YWI7Ki9cclxuICAgIH0pKCk7XHJcblxyXG5cclxuXHJcblxyXG4gICAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgICAqIFVJLm1vZGFsXHJcbiAgICAgKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqL1xyXG4gICAgIFVJLm1vZGFsID0gKGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICB2YXIgVUlfTkFNRSA9ICdVSS5tb2RhbCcsXHJcbiAgICAgICAgICAgIERFRkFVTFRfRFVSQVRJT04gPSAzMDAsXHJcbiAgICAgICAgICAgIE9WRVJMQVlfRFVSQVRJT04gPSAzMDAsXHJcbiAgICAgICAgICAgIERFRkFVTFRfRUFTSU5HID0gJ3N3aW5nJyxcclxuICAgICAgICAgICAgT1ZFUkxBWV9FQVNJTkcgPSAnc3dpbmcnO1xyXG5cclxuICAgICAgICB2YXIgU2VsZWN0b3IgPSB7XHJcbiAgICAgICAgICAgIFdSQVBQRVIgICAgICAgICA6ICcud3JhcHBlcicsXHJcbiAgICAgICAgICAgIE1PREFMICAgICAgICAgICA6ICcubW9kYWwnLFxyXG4gICAgICAgICAgICBNT0RBTF9XSU5ET1cgICAgOiAnLm1vZGFsX193aW5kb3cnLFxyXG4gICAgICAgICAgICBNT0RBTF9PUEVOICAgICAgOiAnW2RhdGEtdWktbW9kYWw9XCJvcGVuXCJdJyxcclxuICAgICAgICAgICAgTU9EQUxfQ0xPU0UgICAgIDogJ1tkYXRhLXVpLW1vZGFsPVwiY2xvc2VcIl0nXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIFN0YXRlID0ge1xyXG4gICAgICAgICAgICBJU19NT0RBTF9PUEVOICAgOiAnbW9kYWwtb3BlbicsXHJcbiAgICAgICAgICAgIElTX09QRU5FRCAgICAgICA6ICdpcy1vcGVuZWQnLFxyXG4gICAgICAgICAgICBJU19PUEVOSU5HICAgICAgOiAnaXMtb3BlbmluZycsXHJcbiAgICAgICAgICAgIElTX0NMT1NFRCAgICAgICA6ICdpcy1jbG9zZWQnLFxyXG4gICAgICAgICAgICBJU19DTE9TSU5HICAgICAgOiAnaXMtY2xvc2luZycsXHJcbiAgICAgICAgICAgIElTX0NVUlJFTlQgICAgICA6ICdpcy1jdXJyZW50JyxcclxuICAgICAgICAgICAgSVNfQUNUSVZFICAgICAgIDogJ2lzLWFjdGl2ZScsXHJcbiAgICAgICAgICAgIElTX1BSRVZJVVMgICAgICA6ICdpcy1wcmV2aXVzJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBFdmVudCA9IHtcclxuICAgICAgICAgICAgQ0xJQ0tfT1BFTiAgICAgIDogJ2NsaWNrLm1vZGFsOm9wZW4nLFxyXG4gICAgICAgICAgICBDTElDS19DTE9TRSAgICAgOiAnY2xpY2subW9kYWw6Y2xvc2UnLFxyXG4gICAgICAgICAgICBPUEVORUQgICAgICAgICAgOiAnbW9kYWw6b3BlbmVkJyxcclxuICAgICAgICAgICAgQ0xPU0VEICAgICAgICAgIDogJ21vZGFsOmNsb3NlZCdcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgTW9kYWwgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsdG9wID0gbnVsbDtcclxuICAgICAgICAgICAgdGhpcy50cmFuc2l0aW9uID0gZ2V0VHJhbnNpdGlvbigpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIE1vZGFsLnByb3RvdHlwZSA9IHtcclxuICAgICAgICAgICAgb3BlbiA6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldCA9IGVsZW1lbnQgfHwgX3RoaXMuZWxlbWVudCxcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gbnVsbCxcclxuICAgICAgICAgICAgICAgICAgICBwcmV2aXVzID0gbnVsbDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggKC8qJCh0YXJnZXQpLmhhc0NsYXNzKFN0YXRlLklTX0NVUlJFTlQpICYmICovJCh0YXJnZXQpLmhhc0NsYXNzKFN0YXRlLklTX09QRU5FRCkpIHx8ICQodGFyZ2V0KS5oYXNDbGFzcyhTdGF0ZS5JU19PUEVOSU5HKSB8fCAkKHRhcmdldCkuaGFzQ2xhc3MoU3RhdGUuSVNfQ0xPU0lORykgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIF90aGlzLnNjcm9sbHRvcCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggISQoZG9jdW1lbnQuYm9keSkuaGFzQ2xhc3MoU3RhdGUuSVNfTU9EQUxfT1BFTikgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudC5ib2R5KS5hZGRDbGFzcyhTdGF0ZS5JU19NT0RBTF9PUEVOKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKCB0YXJnZXQgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldClbMF0ub2Zmc2V0SGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5yZW1vdmVDbGFzcyhTdGF0ZS5JU19DTE9TRUQpO1xyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLmFkZENsYXNzKFN0YXRlLklTX09QRU5JTkcpO1xyXG5cclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5hZGRDbGFzcyhTdGF0ZS5JU19BQ1RJVkUpO1xyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLmFkZENsYXNzKFN0YXRlLklTX0NVUlJFTlQpO1xyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLnJlbW92ZUNsYXNzKFN0YXRlLklTX1BSRVZJVVMpO1xyXG5cclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5zaWJsaW5ncyhTZWxlY3Rvci5NT0RBTCArICcuJyArIFN0YXRlLklTX0FDVElWRSkucmVtb3ZlQ2xhc3MoU3RhdGUuSVNfQ1VSUkVOVCk7XHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkuc2libGluZ3MoU2VsZWN0b3IuTU9EQUwgKyAnLicgKyBTdGF0ZS5JU19BQ1RJVkUpLnJlbW92ZUNsYXNzKFN0YXRlLklTX1BSRVZJVVMpO1xyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLnNpYmxpbmdzKFNlbGVjdG9yLk1PREFMICsgJy4nICsgU3RhdGUuSVNfQUNUSVZFKS5sYXN0KCkuYWRkQ2xhc3MoU3RhdGUuSVNfUFJFVklVUyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIF90aGlzLnRyYW5zaXRpb24gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0YXJnZXQpLnRyYW5zaXRpb25FbmRBZnRlcih0cmFuc2l0aW9uQ29tcGxldGUsIERFRkFVTFRfRFVSQVRJT04pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHRyYW5zaXRpb25Db21wbGV0ZSgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRhcmdldCkucmVtb3ZlQ2xhc3MoU3RhdGUuSVNfT1BFTklORyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0YXJnZXQpLmFkZENsYXNzKFN0YXRlLklTX09QRU5FRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0YXJnZXQpLnRyaWdnZXIoRXZlbnQuT1BFTkVEKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiggISQodGFyZ2V0KS5oYXNDbGFzcyhTdGF0ZS5JU19PUEVORUQpICkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGFyZ2V0KS5hdHRyKCdkYXRhLXNjcm9sbHRvcCcsIDApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRhcmdldCkuZmluZChTZWxlY3Rvci5NT0RBTF9XSU5ET1cpLnNjcm9sbFRvcCggJCh0YXJnZXQpLmF0dHIoJ2RhdGEtc2Nyb2xsdG9wJykgKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBwcmV2aXVzID0gJCh0YXJnZXQpLnNpYmxpbmdzKFNlbGVjdG9yLk1PREFMICsgJy4nICsgU3RhdGUuSVNfUFJFVklVUylbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoICQocHJldml1cykubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgICAgICQocHJldml1cykuYXR0cignZGF0YS1zY3JvbGx0b3AnLCAkKHByZXZpdXMpLmZpbmQoU2VsZWN0b3IuTU9EQUxfV0lORE9XKS5zY3JvbGxUb3AoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLm9mZihFdmVudC5DTElDS19DTE9TRSkub24oRXZlbnQuQ0xJQ0tfQ0xPU0UsIFNlbGVjdG9yLk1PREFMX0NMT1NFLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jbG9zZSggJCh0YXJnZXQpICk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgY2xvc2UgOiBmdW5jdGlvbihlbGVtZW50KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSBlbGVtZW50IHx8IF90aGlzLmVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJldml1cyA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoICEkKHRhcmdldCkuaGFzQ2xhc3MoU3RhdGUuSVNfT1BFTkVEKSB8fCAkKHRhcmdldCkuaGFzQ2xhc3MoU3RhdGUuSVNfQ0xPU0VEKSB8fCAkKHRhcmdldCkuaGFzQ2xhc3MoU3RhdGUuSVNfT1BFTklORykgfHwgJCh0YXJnZXQpLmhhc0NsYXNzKFN0YXRlLklTX0NMT1NJTkcpICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkuYWRkQ2xhc3MoU3RhdGUuSVNfQ0xPU0lORyk7XHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkucmVtb3ZlQ2xhc3MoU3RhdGUuSVNfT1BFTkVEKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkucmVtb3ZlQ2xhc3MoU3RhdGUuSVNfQUNUSVZFKTtcclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5yZW1vdmVDbGFzcyhTdGF0ZS5JU19DVVJSRU5UKTtcclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5yZW1vdmVDbGFzcyhTdGF0ZS5JU19QUkVWSVVTKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkuc2libGluZ3MoU2VsZWN0b3IuTU9EQUwgKyAnLicgKyBTdGF0ZS5JU19BQ1RJVkUpLmxhc3QoKS5hZGRDbGFzcyhTdGF0ZS5JU19DVVJSRU5UKTtcclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5zaWJsaW5ncyhTZWxlY3Rvci5NT0RBTCArICcuJyArIFN0YXRlLklTX0FDVElWRSkucmVtb3ZlQ2xhc3MoU3RhdGUuSVNfUFJFVklVUyk7XHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkuc2libGluZ3MoU2VsZWN0b3IuTU9EQUwgKyAnLicgKyBTdGF0ZS5JU19DVVJSRU5UKS5wcmV2QWxsKCcuJyArIFN0YXRlLklTX0FDVElWRSkuZmlyc3QoKS5hZGRDbGFzcyhTdGF0ZS5JU19QUkVWSVVTKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggX3RoaXMudHJhbnNpdGlvbiApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRhcmdldCkudHJhbnNpdGlvbkVuZEFmdGVyKHRyYW5zaXRpb25Db21wbGV0ZSwgREVGQVVMVF9EVVJBVElPTik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gdHJhbnNpdGlvbkNvbXBsZXRlKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGFyZ2V0KS5yZW1vdmVDbGFzcyhTdGF0ZS5JU19DTE9TSU5HKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRhcmdldCkuYWRkQ2xhc3MoU3RhdGUuSVNfQ0xPU0VEKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRhcmdldCkudHJpZ2dlcihFdmVudC5DTE9TRUQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiggISQodGFyZ2V0KS5zaWJsaW5ncyhTZWxlY3Rvci5NT0RBTCArICcuJyArIFN0YXRlLklTX09QRU5FRCkubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50LmJvZHkpLnJlbW92ZUNsYXNzKFN0YXRlLklTX01PREFMX09QRU4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkuYXR0cignZGF0YS1zY3JvbGx0b3AnLCAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICBjdXJyZW50ID0gJCh0YXJnZXQpLnNpYmxpbmdzKFNlbGVjdG9yLk1PREFMICsgJy4nICsgU3RhdGUuSVNfQ1VSUkVOVClbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoICQoY3VycmVudCkubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoY3VycmVudCkuYXR0cignZGF0YS1zY3JvbGx0b3AnLCAkKGN1cnJlbnQpLmZpbmQoU2VsZWN0b3IuTU9EQUxfV0lORE9XKS5zY3JvbGxUb3AoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJChjdXJyZW50KS5maW5kKFNlbGVjdG9yLk1PREFMX1dJTkRPVykuc2Nyb2xsVG9wKCAkKGN1cnJlbnQpLmF0dHIoJ2RhdGEtc2Nyb2xsdG9wJykgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh3aW5kb3cpLnNjcm9sbFRvcChfdGhpcy5zY3JvbGx0b3ApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgICQuZm4ubW9kYWwgPSBmdW5jdGlvbihvcHRpb24pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhID0gJCh0aGlzKS5kYXRhKFVJX05BTUUpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1ldGhvZCA9ICh0eXBlb2Ygb3B0aW9uID09PSAnc3RyaW5nJykgJiYgb3B0aW9uO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCAhZGF0YSApIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhID0gbmV3IE1vZGFsKHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuZGF0YShVSV9OQU1FLCBkYXRhKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiggbWV0aG9kICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFbbWV0aG9kXSh0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuICAgICB9KSgpO1xyXG5cclxufSkod2luZG93LmpRdWVyeSwgd2luZG93KTsiXX0=
