"use strict";!function(t,s){s.DOCS=s.DOCS||{},t(function(){DOCS.menu.init()}),DOCS.menu={element:".docs-frame__menu",menuitem:".docs-frame__menu__item",viewer:".docs-frame__viewer",init:function(){var s=this;t(s.menuitem).each(function(){var e=t(this);t(this).children("a").filter("[href^=#]").length&&e.addClass("is-disabled"),e.hasClass("is-active")&&s.open(e)}),t(s.menuitem).on("click","> a",function(e){var i=t(e.delegateTarget);e.preventDefault(),s.open(i)})},open:function(s){var e=t(s);e.filter(".is-disabled").length||(this.close(e.siblings().filter(".is-active")),this.view(e),e.addClass("is-active"))},close:function(s){t(s).removeClass("is-active")},view:function(s){var e=t(s).children("a").attr("href");t(this.viewer).attr("src",e)}}}(window.jQuery,window),function(t,s){function e(){var t=document.createElement("fakeelement"),s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var e in s)if(void 0!==t.style[e])return s[e];return!1}var i=s.UI||{};s.UI=i,t(document).ready(function(){}),t.fn.transitionEndAfter=function(s,i){var n=this,a=!1,o=e();return t(this).one(o,function(){a=!0,s()}),setTimeout(function(){a||t(n).trigger(o)},i),this},i.tab=function(){var t='[data-ui-tab="tab"]',s='[data-ui-tab="panel"]',e={handleTabClick:function(t){t=t[0]||t;this.open(t)},open:function(t){var s=function(t){for(var s=[],e=t.parentNode.firstChild;e;e=e.nextSibling)1===e.nodeType&&e!==t&&s.push(e);return s}((t=t[0]||t).parentElement),e=this._getTarget(t);if(!e.item.classList.contains("is-active")){e.item.classList.add("is-active"),e.panel&&e.panel.classList.add("is-active");for(var i in s)this.close(s[i].children[0])}},close:function(t){var s=this._getTarget(t);s.item.classList.contains("is-active")&&s.item.classList.remove("is-active"),s.panel&&s.panel.classList.contains("is-active")&&s.panel.classList.remove("is-active")},_getTarget:function(t){var e={};return e.item=t.parentElement,e.panel=document.querySelector(s+"#"+t.getAttribute("aria-controls")),e}};return document.addEventListener("click",function(s){if(s.preventDefault(),s.target.closest(t)){var i=s.target.closest(t);i&&e.handleTabClick(i)}}),e}(),i.modal=function(){var i={WRAPPER:".wrapper",MODAL:".modal",MODAL_WINDOW:".modal__window",MODAL_OPEN:'[data-ui-modal="open"]',MODAL_CLOSE:'[data-ui-modal="close"]'},n={IS_MODAL_OPEN:"modal-open",IS_OPENED:"is-opened",IS_OPENING:"is-opening",IS_CLOSED:"is-closed",IS_CLOSING:"is-closing",IS_CURRENT:"is-current",IS_ACTIVE:"is-active",IS_PREVIUS:"is-previus"},a={CLICK_OPEN:"click.modal:open",CLICK_CLOSE:"click.modal:close",OPENED:"modal:opened",CLOSED:"modal:closed"},o=function(t){this.element=t,this.scrolltop=null,this.transition=e()};o.prototype={open:function(e){var o=this,l=e||o.element,r=null;t(l).hasClass(n.IS_OPENED)||t(l).hasClass(n.IS_OPENING)||t(l).hasClass(n.IS_CLOSING)||(o.scrolltop=t(s).scrollTop(),t(document.body).hasClass(n.IS_MODAL_OPEN)||t(document.body).addClass(n.IS_MODAL_OPEN),document.body.appendChild(l),t(l)[0].offsetHeight,t(l).removeClass(n.IS_CLOSED),t(l).addClass(n.IS_OPENING),t(l).addClass(n.IS_ACTIVE),t(l).addClass(n.IS_CURRENT),t(l).removeClass(n.IS_PREVIUS),t(l).siblings(i.MODAL+"."+n.IS_ACTIVE).removeClass(n.IS_CURRENT),t(l).siblings(i.MODAL+"."+n.IS_ACTIVE).removeClass(n.IS_PREVIUS),t(l).siblings(i.MODAL+"."+n.IS_ACTIVE).last().addClass(n.IS_PREVIUS),o.transition&&t(l).transitionEndAfter(function(){t(l).removeClass(n.IS_OPENING),t(l).addClass(n.IS_OPENED),t(l).trigger(a.OPENED)},300),t(l).hasClass(n.IS_OPENED)?t(l).find(i.MODAL_WINDOW).scrollTop(t(l).attr("data-scrolltop")):t(l).attr("data-scrolltop",0),r=t(l).siblings(i.MODAL+"."+n.IS_PREVIUS)[0],t(r).length&&t(r).attr("data-scrolltop",t(r).find(i.MODAL_WINDOW).scrollTop()),t(l).off(a.CLICK_CLOSE).on(a.CLICK_CLOSE,i.MODAL_CLOSE,function(){o.close(t(l))}))},close:function(e){var o=e||this.element,l=null;!t(o).hasClass(n.IS_OPENED)||t(o).hasClass(n.IS_CLOSED)||t(o).hasClass(n.IS_OPENING)||t(o).hasClass(n.IS_CLOSING)||(t(o).addClass(n.IS_CLOSING),t(o).removeClass(n.IS_OPENED),t(o).removeClass(n.IS_ACTIVE),t(o).removeClass(n.IS_CURRENT),t(o).removeClass(n.IS_PREVIUS),t(o).siblings(i.MODAL+"."+n.IS_ACTIVE).last().addClass(n.IS_CURRENT),t(o).siblings(i.MODAL+"."+n.IS_ACTIVE).removeClass(n.IS_PREVIUS),t(o).siblings(i.MODAL+"."+n.IS_CURRENT).prevAll("."+n.IS_ACTIVE).first().addClass(n.IS_PREVIUS),this.transition&&t(o).transitionEndAfter(function(){t(o).removeClass(n.IS_CLOSING),t(o).addClass(n.IS_CLOSED),t(o).trigger(a.CLOSED),t(o).siblings(i.MODAL+"."+n.IS_OPENED).length||t(document.body).removeClass(n.IS_MODAL_OPEN)},300),t(o).attr("data-scrolltop",0),l=t(o).siblings(i.MODAL+"."+n.IS_CURRENT)[0],t(l).length?(t(l).attr("data-scrolltop",t(l).find(i.MODAL_WINDOW).scrollTop()),t(l).find(i.MODAL_WINDOW).scrollTop(t(l).attr("data-scrolltop"))):t(s).scrollTop(this.scrolltop))}},t.fn.modal=function(s){return this.each(function(){var e=t(this).data("UI.modal"),i="string"==typeof s&&s;e||(e=new o(this),t(this).data("UI.modal",e)),i&&e[i](this)})}}()}(window.jQuery,window);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRvY3MuanMiLCJzY3JpcHQuanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsIkRPQ1MiLCJtZW51IiwiaW5pdCIsImVsZW1lbnQiLCJtZW51aXRlbSIsInZpZXdlciIsIl90aGlzIiwidGhpcyIsImVhY2giLCIkaXRlbSIsImNoaWxkcmVuIiwiZmlsdGVyIiwibGVuZ3RoIiwiYWRkQ2xhc3MiLCJoYXNDbGFzcyIsIm9wZW4iLCJvbiIsImUiLCJkZWxlZ2F0ZVRhcmdldCIsInByZXZlbnREZWZhdWx0IiwiJGVsZW1lbnQiLCJjbG9zZSIsInNpYmxpbmdzIiwidmlldyIsInJlbW92ZUNsYXNzIiwic3JjIiwiYXR0ciIsImpRdWVyeSIsImdldFRyYW5zaXRpb24iLCJmYWtlZWxlbWVudCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInRyYW5zaXRpb25FbmRFdmVudE5hbWUiLCJXZWJraXRUcmFuc2l0aW9uIiwiTW96VHJhbnNpdGlvbiIsIk9UcmFuc2l0aW9uIiwidHJhbnNpdGlvbiIsIm5hbWUiLCJ1bmRlZmluZWQiLCJzdHlsZSIsIlVJIiwicmVhZHkiLCJmbiIsInRyYW5zaXRpb25FbmRBZnRlciIsImNhbGxiYWNrIiwiZHVyYXRpb24iLCJjYWxsZWQiLCJ0cmFuc2l0aW9uZW5kIiwib25lIiwic2V0VGltZW91dCIsInRyaWdnZXIiLCJ0YWIiLCJTRUxFQ1RPUiIsImhhbmRsZVRhYkNsaWNrIiwic2libGluZyIsInBhcmVudE5vZGUiLCJmaXJzdENoaWxkIiwibmV4dFNpYmxpbmciLCJub2RlVHlwZSIsInB1c2giLCJnZXRTaWJsaW5ncyIsInBhcmVudEVsZW1lbnQiLCJ0YXJnZXQiLCJfZ2V0VGFyZ2V0IiwiaXRlbSIsImNsYXNzTGlzdCIsImNvbnRhaW5zIiwiYWRkIiwicGFuZWwiLCJpIiwicmVtb3ZlIiwicXVlcnlTZWxlY3RvciIsImdldEF0dHJpYnV0ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbG9zZXN0IiwibW9kYWwiLCJTZWxlY3RvciIsIldSQVBQRVIiLCJNT0RBTCIsIk1PREFMX1dJTkRPVyIsIk1PREFMX09QRU4iLCJNT0RBTF9DTE9TRSIsIlN0YXRlIiwiSVNfTU9EQUxfT1BFTiIsIklTX09QRU5FRCIsIklTX09QRU5JTkciLCJJU19DTE9TRUQiLCJJU19DTE9TSU5HIiwiSVNfQ1VSUkVOVCIsIklTX0FDVElWRSIsIklTX1BSRVZJVVMiLCJFdmVudCIsIkNMSUNLX09QRU4iLCJDTElDS19DTE9TRSIsIk9QRU5FRCIsIkNMT1NFRCIsIk1vZGFsIiwic2Nyb2xsdG9wIiwicHJvdG90eXBlIiwicHJldml1cyIsInNjcm9sbFRvcCIsImJvZHkiLCJhcHBlbmRDaGlsZCIsIm9mZnNldEhlaWdodCIsImxhc3QiLCJmaW5kIiwib2ZmIiwiY3VycmVudCIsInByZXZBbGwiLCJmaXJzdCIsIm9wdGlvbiIsImRhdGEiLCJtZXRob2QiXSwibWFwcGluZ3MiOiJjQUFBLFNBQUFBLEVBQUFDLEdBSUFBLEVBQUFDLEtBQUFELEVBQUFDLFNBRUFGLEVBQUEsV0FDQUUsS0FBQUMsS0FBQUMsU0FJQUYsS0FBQUMsTUFDQUUsUUFBQSxvQkFDQUMsU0FBQSwwQkFDQUMsT0FBQSxzQkFDQUgsS0FBQSxXQUVBLElBQUFJLEVBQUFDLEtBRUFULEVBQUFRLEVBQUFGLFVBQUFJLEtBQUEsV0FFQSxJQUFBQyxFQUFBWCxFQUFBUyxNQUNBVCxFQUFBUyxNQUFBRyxTQUFBLEtBRUFDLE9BQUEsYUFBQUMsUUFDQUgsRUFBQUksU0FBQSxlQUdBSixFQUFBSyxTQUFBLGNBQ0FSLEVBQUFTLEtBQUFOLEtBSUFYLEVBQUFRLEVBQUFGLFVBQUFZLEdBQUEsUUFBQSxNQUFBLFNBQUFDLEdBRUEsSUFBQVIsRUFBQVgsRUFBQW1CLEVBQUFDLGdCQUVBRCxFQUFBRSxpQkFFQWIsRUFBQVMsS0FBQU4sTUFNQU0sS0FBQSxTQUFBWixHQUVBLElBQ0FpQixFQUFBdEIsRUFBQUssR0FFQWlCLEVBQUFULE9BQUEsZ0JBQUFDLFNBSEFMLEtBT0FjLE1BQUFELEVBQUFFLFdBQUFYLE9BQUEsZUFQQUosS0FRQWdCLEtBQUFILEdBRUFBLEVBQUFQLFNBQUEsZUFFQVEsTUFBQSxTQUFBbEIsR0FHQUwsRUFBQUssR0FFQXFCLFlBQUEsY0FFQUQsS0FBQSxTQUFBcEIsR0FFQSxJQUVBc0IsRUFEQTNCLEVBQUFLLEdBQUFPLFNBQUEsS0FDQWdCLEtBQUEsUUFFQTVCLEVBSkFTLEtBSUFGLFFBQUFxQixLQUFBLE1BQUFELEtBeEVBLENBNEVBMUIsT0FBQTRCLE9BQUE1QixRQzNFQSxTQUFBRCxFQUFBQyxHQWdDQSxTQUFBNkIsSUFDQSxJQUFBQyxFQUFBQyxTQUFBQyxjQUFBLGVBQ0FDLEdBQ0FDLGlCQUFBLHNCQUNBQyxjQUFBLGdCQUNBQyxZQUFBLGdDQUNBQyxXQUFBLGlCQUdBLElBQUEsSUFBQUMsS0FBQUwsRUFDQSxRQUFBTSxJQUFBVCxFQUFBVSxNQUFBRixHQUNBLE9BQUFMLEVBQUFLLEdBSUEsT0FBQSxFQTNDQSxJQUFBRyxFQUFBekMsRUFBQXlDLE9BRUF6QyxFQUFBeUMsR0FBQUEsRUFFQTFDLEVBQUFnQyxVQUFBVyxNQUFBLGNBMkNBM0MsRUFBQTRDLEdBQUFDLG1CQUFBLFNBQUFDLEVBQUFDLEdBQ0EsSUFBQXZDLEVBQUFDLEtBQ0F1QyxHQUFBLEVBQ0FDLEVBQUFuQixJQWFBLE9BWEE5QixFQUFBUyxNQUFBeUMsSUFBQUQsRUFBQSxXQUNBRCxHQUFBLEVBQ0FGLE1BR0FLLFdBQUEsV0FDQUgsR0FDQWhELEVBQUFRLEdBQUE0QyxRQUFBSCxJQUVBRixHQUVBdEMsTUFrQkFpQyxFQUFBVyxJQUFBLFdBRUEsSUFFQUMsRUFDQSxzQkFEQUEsRUFFQSx3QkFXQUQsR0FDQUUsZUFBQSxTQUFBbEQsR0FFQUEsRUFBQUEsRUFBQSxJQUFBQSxFQUVBSSxLQUFBUSxLQUFBWixJQUVBWSxLQUFBLFNBQUFaLEdBQ0EsSUFFQW1CLEVBekNBLFNBQUFuQixHQUdBLElBRkEsSUFBQW1CLEtBQ0FnQyxFQUFBbkQsRUFBQW9ELFdBQUFDLFdBQ0FGLEVBQUFBLEVBQUFBLEVBQUFHLFlBQ0EsSUFBQUgsRUFBQUksVUFBQUosSUFBQW5ELEdBQ0FtQixFQUFBcUMsS0FBQUwsR0FFQSxPQUFBaEMsRUFrQ0FzQyxFQURBekQsRUFBQUEsRUFBQSxJQUFBQSxHQUNBMEQsZUFDQUMsRUFBQXZELEtBQUF3RCxXQUFBNUQsR0FFQSxJQUFBMkQsRUFBQUUsS0FBQUMsVUFBQUMsU0FBQSxhQUFBLENBSUFKLEVBQUFFLEtBQUFDLFVBQUFFLElBQUEsYUFFQUwsRUFBQU0sT0FDQU4sRUFBQU0sTUFBQUgsVUFBQUUsSUFBQSxhQUdBLElBQUEsSUFBQUUsS0FBQS9DLEVBZkFmLEtBZ0JBYyxNQUFBQyxFQUFBK0MsR0FBQTNELFNBQUEsTUFHQVcsTUFBQSxTQUFBbEIsR0FDQSxJQUFBMkQsRUFBQXZELEtBQUF3RCxXQUFBNUQsR0FFQTJELEVBQUFFLEtBQUFDLFVBQUFDLFNBQUEsY0FDQUosRUFBQUUsS0FBQUMsVUFBQUssT0FBQSxhQUdBUixFQUFBTSxPQUNBTixFQUFBTSxNQUFBSCxVQUFBQyxTQUFBLGNBQ0FKLEVBQUFNLE1BQUFILFVBQUFLLE9BQUEsY0FJQVAsV0FBQSxTQUFBNUQsR0FDQSxJQUFBMkQsS0FLQSxPQUhBQSxFQUFBRSxLQUFBN0QsRUFBQTBELGNBQ0FDLEVBQUFNLE1BQUF0QyxTQUFBeUMsY0FBQW5CLEVBQUEsSUFBQWpELEVBQUFxRSxhQUFBLGtCQUVBVixJQWtCQSxPQWRBaEMsU0FBQTJDLGlCQUFBLFFBQUEsU0FBQXhELEdBRUEsR0FEQUEsRUFBQUUsaUJBQ0FGLEVBQUE2QyxPQUFBWSxRQUFBdEIsR0FBQSxDQUVBLElBQUFqRCxFQUFBYyxFQUFBNkMsT0FBQVksUUFBQXRCLEdBR0FqRCxHQUlBZ0QsRUFBQUUsZUFBQWxELE1BR0FnRCxFQWpGQSxHQThJQVgsRUFBQW1DLE1BQUEsV0FFQSxJQU1BQyxHQUNBQyxRQUFBLFdBQ0FDLE1BQUEsU0FDQUMsYUFBQSxpQkFDQUMsV0FBQSx5QkFDQUMsWUFBQSwyQkFHQUMsR0FDQUMsY0FBQSxhQUNBQyxVQUFBLFlBQ0FDLFdBQUEsYUFDQUMsVUFBQSxZQUNBQyxXQUFBLGFBQ0FDLFdBQUEsYUFDQUMsVUFBQSxZQUNBQyxXQUFBLGNBR0FDLEdBQ0FDLFdBQUEsbUJBQ0FDLFlBQUEsb0JBQ0FDLE9BQUEsZUFDQUMsT0FBQSxnQkFHQUMsRUFBQSxTQUFBN0YsR0FDQUksS0FBQUosUUFBQUEsRUFDQUksS0FBQTBGLFVBQUEsS0FDQTFGLEtBQUE2QixXQUFBUixLQUdBb0UsRUFBQUUsV0FDQW5GLEtBQUEsU0FBQVosR0FFQSxJQUFBRyxFQUFBQyxLQUNBdUQsRUFBQTNELEdBQUFHLEVBQUFILFFBRUFnRyxFQUFBLEtBRUFyRyxFQUFBZ0UsR0FBQWhELFNBQUFvRSxFQUFBRSxZQUFBdEYsRUFBQWdFLEdBQUFoRCxTQUFBb0UsRUFBQUcsYUFBQXZGLEVBQUFnRSxHQUFBaEQsU0FBQW9FLEVBQUFLLGNBSUFqRixFQUFBMkYsVUFBQW5HLEVBQUFDLEdBQUFxRyxZQUVBdEcsRUFBQWdDLFNBQUF1RSxNQUFBdkYsU0FBQW9FLEVBQUFDLGdCQUNBckYsRUFBQWdDLFNBQUF1RSxNQUFBeEYsU0FBQXFFLEVBQUFDLGVBR0FyRCxTQUFBdUUsS0FBQUMsWUFBQXhDLEdBRUFoRSxFQUFBZ0UsR0FBQSxHQUFBeUMsYUFFQXpHLEVBQUFnRSxHQUFBdEMsWUFBQTBELEVBQUFJLFdBQ0F4RixFQUFBZ0UsR0FBQWpELFNBQUFxRSxFQUFBRyxZQUVBdkYsRUFBQWdFLEdBQUFqRCxTQUFBcUUsRUFBQU8sV0FDQTNGLEVBQUFnRSxHQUFBakQsU0FBQXFFLEVBQUFNLFlBQ0ExRixFQUFBZ0UsR0FBQXRDLFlBQUEwRCxFQUFBUSxZQUVBNUYsRUFBQWdFLEdBQUF4QyxTQUFBc0QsRUFBQUUsTUFBQSxJQUFBSSxFQUFBTyxXQUFBakUsWUFBQTBELEVBQUFNLFlBQ0ExRixFQUFBZ0UsR0FBQXhDLFNBQUFzRCxFQUFBRSxNQUFBLElBQUFJLEVBQUFPLFdBQUFqRSxZQUFBMEQsRUFBQVEsWUFDQTVGLEVBQUFnRSxHQUFBeEMsU0FBQXNELEVBQUFFLE1BQUEsSUFBQUksRUFBQU8sV0FBQWUsT0FBQTNGLFNBQUFxRSxFQUFBUSxZQUVBcEYsRUFBQThCLFlBQ0F0QyxFQUFBZ0UsR0FBQW5CLG1CQUdBLFdBQ0E3QyxFQUFBZ0UsR0FBQXRDLFlBQUEwRCxFQUFBRyxZQUNBdkYsRUFBQWdFLEdBQUFqRCxTQUFBcUUsRUFBQUUsV0FDQXRGLEVBQUFnRSxHQUFBWixRQUFBeUMsRUFBQUcsU0E3RUEsS0FnRkFoRyxFQUFBZ0UsR0FBQWhELFNBQUFvRSxFQUFBRSxXQUdBdEYsRUFBQWdFLEdBQUEyQyxLQUFBN0IsRUFBQUcsY0FBQXFCLFVBQUF0RyxFQUFBZ0UsR0FBQXBDLEtBQUEsbUJBRkE1QixFQUFBZ0UsR0FBQXBDLEtBQUEsaUJBQUEsR0FLQXlFLEVBQUFyRyxFQUFBZ0UsR0FBQXhDLFNBQUFzRCxFQUFBRSxNQUFBLElBQUFJLEVBQUFRLFlBQUEsR0FFQTVGLEVBQUFxRyxHQUFBdkYsUUFDQWQsRUFBQXFHLEdBQUF6RSxLQUFBLGlCQUFBNUIsRUFBQXFHLEdBQUFNLEtBQUE3QixFQUFBRyxjQUFBcUIsYUFHQXRHLEVBQUFnRSxHQUFBNEMsSUFBQWYsRUFBQUUsYUFBQTdFLEdBQUEyRSxFQUFBRSxZQUFBakIsRUFBQUssWUFBQSxXQUNBM0UsRUFBQWUsTUFBQXZCLEVBQUFnRSxRQUdBekMsTUFBQSxTQUFBbEIsR0FFQSxJQUNBMkQsRUFBQTNELEdBREFJLEtBQ0FKLFFBQ0F3RyxFQUFBLE1BR0E3RyxFQUFBZ0UsR0FBQWhELFNBQUFvRSxFQUFBRSxZQUFBdEYsRUFBQWdFLEdBQUFoRCxTQUFBb0UsRUFBQUksWUFBQXhGLEVBQUFnRSxHQUFBaEQsU0FBQW9FLEVBQUFHLGFBQUF2RixFQUFBZ0UsR0FBQWhELFNBQUFvRSxFQUFBSyxjQUlBekYsRUFBQWdFLEdBQUFqRCxTQUFBcUUsRUFBQUssWUFDQXpGLEVBQUFnRSxHQUFBdEMsWUFBQTBELEVBQUFFLFdBRUF0RixFQUFBZ0UsR0FBQXRDLFlBQUEwRCxFQUFBTyxXQUNBM0YsRUFBQWdFLEdBQUF0QyxZQUFBMEQsRUFBQU0sWUFDQTFGLEVBQUFnRSxHQUFBdEMsWUFBQTBELEVBQUFRLFlBRUE1RixFQUFBZ0UsR0FBQXhDLFNBQUFzRCxFQUFBRSxNQUFBLElBQUFJLEVBQUFPLFdBQUFlLE9BQUEzRixTQUFBcUUsRUFBQU0sWUFDQTFGLEVBQUFnRSxHQUFBeEMsU0FBQXNELEVBQUFFLE1BQUEsSUFBQUksRUFBQU8sV0FBQWpFLFlBQUEwRCxFQUFBUSxZQUNBNUYsRUFBQWdFLEdBQUF4QyxTQUFBc0QsRUFBQUUsTUFBQSxJQUFBSSxFQUFBTSxZQUFBb0IsUUFBQSxJQUFBMUIsRUFBQU8sV0FBQW9CLFFBQUFoRyxTQUFBcUUsRUFBQVEsWUFsQkFuRixLQW9CQTZCLFlBQ0F0QyxFQUFBZ0UsR0FBQW5CLG1CQUdBLFdBQ0E3QyxFQUFBZ0UsR0FBQXRDLFlBQUEwRCxFQUFBSyxZQUNBekYsRUFBQWdFLEdBQUFqRCxTQUFBcUUsRUFBQUksV0FDQXhGLEVBQUFnRSxHQUFBWixRQUFBeUMsRUFBQUksUUFFQWpHLEVBQUFnRSxHQUFBeEMsU0FBQXNELEVBQUFFLE1BQUEsSUFBQUksRUFBQUUsV0FBQXhFLFFBQ0FkLEVBQUFnQyxTQUFBdUUsTUFBQTdFLFlBQUEwRCxFQUFBQyxnQkFoSUEsS0FvSUFyRixFQUFBZ0UsR0FBQXBDLEtBQUEsaUJBQUEsR0FFQWlGLEVBQUE3RyxFQUFBZ0UsR0FBQXhDLFNBQUFzRCxFQUFBRSxNQUFBLElBQUFJLEVBQUFNLFlBQUEsR0FFQTFGLEVBQUE2RyxHQUFBL0YsUUFDQWQsRUFBQTZHLEdBQUFqRixLQUFBLGlCQUFBNUIsRUFBQTZHLEdBQUFGLEtBQUE3QixFQUFBRyxjQUFBcUIsYUFDQXRHLEVBQUE2RyxHQUFBRixLQUFBN0IsRUFBQUcsY0FBQXFCLFVBQUF0RyxFQUFBNkcsR0FBQWpGLEtBQUEsb0JBRUE1QixFQUFBQyxHQUFBcUcsVUExQ0E3RixLQTBDQTBGLGNBS0FuRyxFQUFBNEMsR0FBQWlDLE1BQUEsU0FBQW1DLEdBQ0EsT0FBQXZHLEtBQUFDLEtBQUEsV0FDQSxJQUFBdUcsRUFBQWpILEVBQUFTLE1BQUF3RyxLQXBKQSxZQXFKQUMsRUFBQSxpQkFBQUYsR0FBQUEsRUFFQUMsSUFDQUEsRUFBQSxJQUFBZixFQUFBekYsTUFDQVQsRUFBQVMsTUFBQXdHLEtBekpBLFdBeUpBQSxJQUdBQyxHQUNBRCxFQUFBQyxHQUFBekcsU0EvSkEsR0FuT0EsQ0F3WUFSLE9BQUE0QixPQUFBNUIiLCJmaWxlIjoiYnVuZGxlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiOyhmdW5jdGlvbigkLCB3aW5kb3cpIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgd2luZG93LkRPQ1MgPSB3aW5kb3cuRE9DUyB8fCB7fTtcclxuXHJcbiAgICAkKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIERPQ1MubWVudS5pbml0KCk7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgRE9DUy5tZW51ID0ge1xyXG4gICAgICAgIGVsZW1lbnQgOiAnLmRvY3MtZnJhbWVfX21lbnUnLFxyXG4gICAgICAgIG1lbnVpdGVtIDogJy5kb2NzLWZyYW1lX19tZW51X19pdGVtJyxcclxuICAgICAgICB2aWV3ZXIgOiAnLmRvY3MtZnJhbWVfX3ZpZXdlcicsXHJcbiAgICAgICAgaW5pdCA6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgICQoX3RoaXMubWVudWl0ZW0pLmVhY2goZnVuY3Rpb24oKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyICRpdGVtID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgICAgICAkYW5jaG9yID0gJCh0aGlzKS5jaGlsZHJlbignYScpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCAkYW5jaG9yLmZpbHRlcignW2hyZWZePSNdJykubGVuZ3RoICkge1xyXG4gICAgICAgICAgICAgICAgICAgICRpdGVtLmFkZENsYXNzKCdpcy1kaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmKCAkaXRlbS5oYXNDbGFzcygnaXMtYWN0aXZlJykgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMub3BlbiggJGl0ZW0gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAkKF90aGlzLm1lbnVpdGVtKS5vbignY2xpY2snLCc+IGEnLCBmdW5jdGlvbihlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyICRpdGVtID0gJChlLmRlbGVnYXRlVGFyZ2V0KTtcclxuXHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgX3RoaXMub3BlbiggJGl0ZW0gKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvL190aGlzLm9wZW4oICQoX3RoaXMubWVudWl0ZW0pLmVxKDApICk7XHJcblxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb3BlbiA6IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xyXG5cclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICRlbGVtZW50ID0gJChlbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgIGlmKCAkZWxlbWVudC5maWx0ZXIoJy5pcy1kaXNhYmxlZCcpLmxlbmd0aCApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgX3RoaXMuY2xvc2UoICRlbGVtZW50LnNpYmxpbmdzKCkuZmlsdGVyKCcuaXMtYWN0aXZlJykgKTtcclxuICAgICAgICAgICAgX3RoaXMudmlldyggJGVsZW1lbnQgKTtcclxuXHJcbiAgICAgICAgICAgICRlbGVtZW50LmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNsb3NlIDogZnVuY3Rpb24oIGVsZW1lbnQgKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzLFxyXG4gICAgICAgICAgICAgICAgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xyXG5cclxuICAgICAgICAgICAgJGVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdmlldyA6IGZ1bmN0aW9uKCBlbGVtZW50ICkge1xyXG5cclxuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICRhbmNob3IgPSAkKGVsZW1lbnQpLmNoaWxkcmVuKCdhJyksXHJcbiAgICAgICAgICAgICAgICBzcmMgPSAkYW5jaG9yLmF0dHIoJ2hyZWYnKTtcclxuXHJcbiAgICAgICAgICAgICQoX3RoaXMudmlld2VyKS5hdHRyKCdzcmMnLCBzcmMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG59KSh3aW5kb3cualF1ZXJ5LCB3aW5kb3cpOyIsIlxyXG47KGZ1bmN0aW9uKCQsIHdpbmRvdykge1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICB2YXIgVUkgPSB3aW5kb3cuVUkgfHwge307XHJcblxyXG4gICAgd2luZG93LlVJID0gVUk7XHJcblxyXG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKXtcclxuXHJcbiAgICB9KTtcclxuXHJcblxyXG5cclxuXHJcbiAgICAvKiA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxyXG4gICAgICogVUkudXRpbFxyXG4gICAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuICAgIGZ1bmN0aW9uIGdldFNjcm9sbGJhcldpZHRoKCkge1xyXG4gICAgICAgIHZhciB3aW5kb3dJbm5lcldpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XHJcblxyXG4gICAgICAgIGlmKCAhd2luZG93SW5uZXJXaWR0aCApIHtcclxuXHJcbiAgICAgICAgICB2YXIgZG9jdW1lbnRFbGVtZW50UmVjdCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcclxuXHJcbiAgICAgICAgICB3aW5kb3dJbm5lcldpZHRoID0gZG9jdW1lbnRFbGVtZW50UmVjdC5yaWdodCAtIE1hdGguYWJzKGRvY3VtZW50RWxlbWVudFJlY3QubGVmdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gd2luZG93SW5uZXJXaWR0aCAtIGRvY3VtZW50LmJvZHkuY2xpZW50V2lkdGg7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGZ1bmN0aW9uIGdldFRyYW5zaXRpb24oKSB7XHJcbiAgICAgICAgdmFyIGZha2VlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZmFrZWVsZW1lbnQnKSxcclxuICAgICAgICAgICAgdHJhbnNpdGlvbkVuZEV2ZW50TmFtZSA9IHtcclxuICAgICAgICAgICAgICAgIFdlYmtpdFRyYW5zaXRpb24gOiAnd2Via2l0VHJhbnNpdGlvbkVuZCcsXHJcbiAgICAgICAgICAgICAgICBNb3pUcmFuc2l0aW9uICAgIDogJ3RyYW5zaXRpb25lbmQnLFxyXG4gICAgICAgICAgICAgICAgT1RyYW5zaXRpb24gICAgICA6ICdvVHJhbnNpdGlvbkVuZCBvdHJhbnNpdGlvbmVuZCcsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2l0aW9uICAgICAgIDogJ3RyYW5zaXRpb25lbmQnXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgIGZvciggdmFyIG5hbWUgaW4gdHJhbnNpdGlvbkVuZEV2ZW50TmFtZSApIHtcclxuICAgICAgICAgICAgaWYoIGZha2VlbGVtZW50LnN0eWxlW25hbWVdICE9PSB1bmRlZmluZWQgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNpdGlvbkVuZEV2ZW50TmFtZVtuYW1lXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAkLmZuLnRyYW5zaXRpb25FbmRBZnRlciA9IGZ1bmN0aW9uKGNhbGxiYWNrLCBkdXJhdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXMsXHJcbiAgICAgICAgICAgIGNhbGxlZCA9IGZhbHNlLFxyXG4gICAgICAgICAgICB0cmFuc2l0aW9uZW5kID0gZ2V0VHJhbnNpdGlvbigpO1xyXG5cclxuICAgICAgICAkKHRoaXMpLm9uZSh0cmFuc2l0aW9uZW5kLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgY2FsbGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgY2FsbGJhY2soKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmKCAhY2FsbGVkICkge1xyXG4gICAgICAgICAgICAgICAgJChfdGhpcykudHJpZ2dlcih0cmFuc2l0aW9uZW5kKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIGR1cmF0aW9uKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBnZXRTaWJsaW5ncyhlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIHNpYmxpbmdzID0gW107XHJcbiAgICAgICAgdmFyIHNpYmxpbmcgPSBlbGVtZW50LnBhcmVudE5vZGUuZmlyc3RDaGlsZDtcclxuICAgICAgICBmb3IgKDsgc2libGluZzsgc2libGluZyA9IHNpYmxpbmcubmV4dFNpYmxpbmcpIHtcclxuICAgICAgICAgICAgaWYgKHNpYmxpbmcubm9kZVR5cGUgIT09IDEgfHwgc2libGluZyA9PT0gZWxlbWVudCkgY29udGludWU7XHJcbiAgICAgICAgICAgIHNpYmxpbmdzLnB1c2goc2libGluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzaWJsaW5ncztcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cclxuICAgICAqIFVJLnRhYlxyXG4gICAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuICAgIFVJLnRhYiA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIFVJX05BTUUgPSAnVUkudGFiJztcclxuXHJcbiAgICAgICAgdmFyIFNFTEVDVE9SID0ge1xyXG4gICAgICAgICAgICBUQUIgOiAnW2RhdGEtdWktdGFiPVwidGFiXCJdJyxcclxuICAgICAgICAgICAgUEFORUwgOiAnW2RhdGEtdWktdGFiPVwicGFuZWxcIl0nXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIFNUQVRFID0ge1xyXG4gICAgICAgICAgICBJU19BQ1RJVkUgOiAnYWN0aXZlJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBFVkVOVCA9IHtcclxuICAgICAgICAgICAgQ0xJQ0tfT1BFTiA6ICdjbGljay50YWI6b3BlbidcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgdGFiID0ge1xyXG4gICAgICAgICAgICBoYW5kbGVUYWJDbGljayA6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB2YXIgZWxlbWVudCA9IGVsZW1lbnRbMF0gfHwgZWxlbWVudDtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm9wZW4oZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9wZW4gOiBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBlbGVtZW50WzBdIHx8IGVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2libGluZ3MgPSBnZXRTaWJsaW5ncyhlbGVtZW50LnBhcmVudEVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMuX2dldFRhcmdldChlbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggdGFyZ2V0Lml0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1hY3RpdmUnKSApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGFyZ2V0Lml0ZW0uY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIHRhcmdldC5wYW5lbCApIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQucGFuZWwuY2xhc3NMaXN0LmFkZCgnaXMtYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yKCB2YXIgaSBpbiBzaWJsaW5ncyApIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jbG9zZShzaWJsaW5nc1tpXS5jaGlsZHJlblswXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNsb3NlIDogZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMuX2dldFRhcmdldChlbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggdGFyZ2V0Lml0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1hY3RpdmUnKSApIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQuaXRlbS5jbGFzc0xpc3QucmVtb3ZlKCdpcy1hY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiggdGFyZ2V0LnBhbmVsICkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKCB0YXJnZXQucGFuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1hY3RpdmUnKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0LnBhbmVsLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgX2dldFRhcmdldCA6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSB7fTtcclxuXHJcbiAgICAgICAgICAgICAgICB0YXJnZXQuaXRlbSA9IGVsZW1lbnQucGFyZW50RWxlbWVudDtcclxuICAgICAgICAgICAgICAgIHRhcmdldC5wYW5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoU0VMRUNUT1IuUEFORUwgKyAnIycrIGVsZW1lbnQuZ2V0QXR0cmlidXRlKCdhcmlhLWNvbnRyb2xzJykpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBpZighZS50YXJnZXQuY2xvc2VzdChTRUxFQ1RPUi5UQUIpKSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICB2YXIgZWxlbWVudCA9IGUudGFyZ2V0LmNsb3Nlc3QoU0VMRUNUT1IuVEFCKTtcclxuXHJcblxyXG4gICAgICAgICAgICBpZiggIWVsZW1lbnQgKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRhYi5oYW5kbGVUYWJDbGljayhlbGVtZW50KTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHRhYjtcclxuXHJcbiAgICAgICAgLyp2YXIgdGFiID0ge1xyXG4gICAgICAgICAgICBlbGVtZW50IDogJ1tkYXRhLXVpLXRhYj1cInRhYlwiXScsXHJcbiAgICAgICAgICAgIHBhbmVsIDogJ1tkYXRhLXVpLXRhYj1cInBhbmVsXCJdJyxcclxuICAgICAgICAgICAgb3BlbiA6IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gX3RoaXMuX2dldFRhcmdldCggZWxlbWVudCApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCB0YXJnZXQuaXRlbS5oYXNDbGFzcygnaXMtYWN0aXZlJykgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRhcmdldC5pdGVtLmFkZENsYXNzKCdpcy1hY3RpdmUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggdGFyZ2V0LnBhbmVsLmxlbmd0aCApIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQucGFuZWwuYWRkQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIF90aGlzLmNsb3NlKCB0YXJnZXQuaXRlbS5zaWJsaW5ncygpLmZpbHRlcignLmlzLWFjdGl2ZScpLmNoaWxkcmVuKF90aGlzLmVsZW1lbnQpICk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNsb3NlIDogZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBfdGhpcy5fZ2V0VGFyZ2V0KCBlbGVtZW50ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoICF0YXJnZXQuaXRlbS5oYXNDbGFzcygnaXMtYWN0aXZlJykgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRhcmdldC5pdGVtLnJlbW92ZUNsYXNzKCdpcy1hY3RpdmUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggdGFyZ2V0LnBhbmVsLmxlbmd0aCApIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQucGFuZWwucmVtb3ZlQ2xhc3MoJ2lzLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBfZ2V0VGFyZ2V0IDogZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSB7fTtcclxuXHJcbiAgICAgICAgICAgICAgICB0YXJnZXQuaXRlbSA9ICQoZWxlbWVudCkucGFyZW50KCk7XHJcbiAgICAgICAgICAgICAgICB0YXJnZXQucGFuZWwgPSAkKF90aGlzLnBhbmVsKS5maWx0ZXIoJyMnICsgJChlbGVtZW50KS5hdHRyKCdhcmlhLWNvbnRyb2xzJykpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0YXJnZXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCB0YWIuZWxlbWVudCwgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICB0YWIub3BlbiggdGhpcyApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGFiOyovXHJcbiAgICB9KSgpO1xyXG5cclxuXHJcblxyXG5cclxuICAgIC8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XHJcbiAgICAgKiBVSS5tb2RhbFxyXG4gICAgICogPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0gKi9cclxuICAgICBVSS5tb2RhbCA9IChmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgdmFyIFVJX05BTUUgPSAnVUkubW9kYWwnLFxyXG4gICAgICAgICAgICBERUZBVUxUX0RVUkFUSU9OID0gMzAwLFxyXG4gICAgICAgICAgICBPVkVSTEFZX0RVUkFUSU9OID0gMzAwLFxyXG4gICAgICAgICAgICBERUZBVUxUX0VBU0lORyA9ICdzd2luZycsXHJcbiAgICAgICAgICAgIE9WRVJMQVlfRUFTSU5HID0gJ3N3aW5nJztcclxuXHJcbiAgICAgICAgdmFyIFNlbGVjdG9yID0ge1xyXG4gICAgICAgICAgICBXUkFQUEVSICAgICAgICAgOiAnLndyYXBwZXInLFxyXG4gICAgICAgICAgICBNT0RBTCAgICAgICAgICAgOiAnLm1vZGFsJyxcclxuICAgICAgICAgICAgTU9EQUxfV0lORE9XICAgIDogJy5tb2RhbF9fd2luZG93JyxcclxuICAgICAgICAgICAgTU9EQUxfT1BFTiAgICAgIDogJ1tkYXRhLXVpLW1vZGFsPVwib3BlblwiXScsXHJcbiAgICAgICAgICAgIE1PREFMX0NMT1NFICAgICA6ICdbZGF0YS11aS1tb2RhbD1cImNsb3NlXCJdJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHZhciBTdGF0ZSA9IHtcclxuICAgICAgICAgICAgSVNfTU9EQUxfT1BFTiAgIDogJ21vZGFsLW9wZW4nLFxyXG4gICAgICAgICAgICBJU19PUEVORUQgICAgICAgOiAnaXMtb3BlbmVkJyxcclxuICAgICAgICAgICAgSVNfT1BFTklORyAgICAgIDogJ2lzLW9wZW5pbmcnLFxyXG4gICAgICAgICAgICBJU19DTE9TRUQgICAgICAgOiAnaXMtY2xvc2VkJyxcclxuICAgICAgICAgICAgSVNfQ0xPU0lORyAgICAgIDogJ2lzLWNsb3NpbmcnLFxyXG4gICAgICAgICAgICBJU19DVVJSRU5UICAgICAgOiAnaXMtY3VycmVudCcsXHJcbiAgICAgICAgICAgIElTX0FDVElWRSAgICAgICA6ICdpcy1hY3RpdmUnLFxyXG4gICAgICAgICAgICBJU19QUkVWSVVTICAgICAgOiAnaXMtcHJldml1cydcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB2YXIgRXZlbnQgPSB7XHJcbiAgICAgICAgICAgIENMSUNLX09QRU4gICAgICA6ICdjbGljay5tb2RhbDpvcGVuJyxcclxuICAgICAgICAgICAgQ0xJQ0tfQ0xPU0UgICAgIDogJ2NsaWNrLm1vZGFsOmNsb3NlJyxcclxuICAgICAgICAgICAgT1BFTkVEICAgICAgICAgIDogJ21vZGFsOm9wZW5lZCcsXHJcbiAgICAgICAgICAgIENMT1NFRCAgICAgICAgICA6ICdtb2RhbDpjbG9zZWQnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdmFyIE1vZGFsID0gZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbHRvcCA9IG51bGw7XHJcbiAgICAgICAgICAgIHRoaXMudHJhbnNpdGlvbiA9IGdldFRyYW5zaXRpb24oKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBNb2RhbC5wcm90b3R5cGUgPSB7XHJcbiAgICAgICAgICAgIG9wZW4gOiBmdW5jdGlvbihlbGVtZW50KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcyxcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSBlbGVtZW50IHx8IF90aGlzLmVsZW1lbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudCA9IG51bGwsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJldml1cyA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoICgvKiQodGFyZ2V0KS5oYXNDbGFzcyhTdGF0ZS5JU19DVVJSRU5UKSAmJiAqLyQodGFyZ2V0KS5oYXNDbGFzcyhTdGF0ZS5JU19PUEVORUQpKSB8fCAkKHRhcmdldCkuaGFzQ2xhc3MoU3RhdGUuSVNfT1BFTklORykgfHwgJCh0YXJnZXQpLmhhc0NsYXNzKFN0YXRlLklTX0NMT1NJTkcpICkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zY3JvbGx0b3AgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoICEkKGRvY3VtZW50LmJvZHkpLmhhc0NsYXNzKFN0YXRlLklTX01PREFMX09QRU4pICkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoZG9jdW1lbnQuYm9keSkuYWRkQ2xhc3MoU3RhdGUuSVNfTU9EQUxfT1BFTik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggdGFyZ2V0ICk7XHJcblxyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpWzBdLm9mZnNldEhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkucmVtb3ZlQ2xhc3MoU3RhdGUuSVNfQ0xPU0VEKTtcclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5hZGRDbGFzcyhTdGF0ZS5JU19PUEVOSU5HKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkuYWRkQ2xhc3MoU3RhdGUuSVNfQUNUSVZFKTtcclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5hZGRDbGFzcyhTdGF0ZS5JU19DVVJSRU5UKTtcclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5yZW1vdmVDbGFzcyhTdGF0ZS5JU19QUkVWSVVTKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkuc2libGluZ3MoU2VsZWN0b3IuTU9EQUwgKyAnLicgKyBTdGF0ZS5JU19BQ1RJVkUpLnJlbW92ZUNsYXNzKFN0YXRlLklTX0NVUlJFTlQpO1xyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLnNpYmxpbmdzKFNlbGVjdG9yLk1PREFMICsgJy4nICsgU3RhdGUuSVNfQUNUSVZFKS5yZW1vdmVDbGFzcyhTdGF0ZS5JU19QUkVWSVVTKTtcclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5zaWJsaW5ncyhTZWxlY3Rvci5NT0RBTCArICcuJyArIFN0YXRlLklTX0FDVElWRSkubGFzdCgpLmFkZENsYXNzKFN0YXRlLklTX1BSRVZJVVMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCBfdGhpcy50cmFuc2l0aW9uICkge1xyXG4gICAgICAgICAgICAgICAgICAgICQodGFyZ2V0KS50cmFuc2l0aW9uRW5kQWZ0ZXIodHJhbnNpdGlvbkNvbXBsZXRlLCBERUZBVUxUX0RVUkFUSU9OKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiB0cmFuc2l0aW9uQ29tcGxldGUoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0YXJnZXQpLnJlbW92ZUNsYXNzKFN0YXRlLklTX09QRU5JTkcpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGFyZ2V0KS5hZGRDbGFzcyhTdGF0ZS5JU19PUEVORUQpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGFyZ2V0KS50cmlnZ2VyKEV2ZW50Lk9QRU5FRCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoICEkKHRhcmdldCkuaGFzQ2xhc3MoU3RhdGUuSVNfT1BFTkVEKSApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRhcmdldCkuYXR0cignZGF0YS1zY3JvbGx0b3AnLCAwKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0YXJnZXQpLmZpbmQoU2VsZWN0b3IuTU9EQUxfV0lORE9XKS5zY3JvbGxUb3AoICQodGFyZ2V0KS5hdHRyKCdkYXRhLXNjcm9sbHRvcCcpICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcHJldml1cyA9ICQodGFyZ2V0KS5zaWJsaW5ncyhTZWxlY3Rvci5NT0RBTCArICcuJyArIFN0YXRlLklTX1BSRVZJVVMpWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCAkKHByZXZpdXMpLmxlbmd0aCApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHByZXZpdXMpLmF0dHIoJ2RhdGEtc2Nyb2xsdG9wJywgJChwcmV2aXVzKS5maW5kKFNlbGVjdG9yLk1PREFMX1dJTkRPVykuc2Nyb2xsVG9wKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5vZmYoRXZlbnQuQ0xJQ0tfQ0xPU0UpLm9uKEV2ZW50LkNMSUNLX0NMT1NFLCBTZWxlY3Rvci5NT0RBTF9DTE9TRSwgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMuY2xvc2UoICQodGFyZ2V0KSApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGNsb3NlIDogZnVuY3Rpb24oZWxlbWVudCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXMsXHJcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gZWxlbWVudCB8fCBfdGhpcy5lbGVtZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIHByZXZpdXMgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCAhJCh0YXJnZXQpLmhhc0NsYXNzKFN0YXRlLklTX09QRU5FRCkgfHwgJCh0YXJnZXQpLmhhc0NsYXNzKFN0YXRlLklTX0NMT1NFRCkgfHwgJCh0YXJnZXQpLmhhc0NsYXNzKFN0YXRlLklTX09QRU5JTkcpIHx8ICQodGFyZ2V0KS5oYXNDbGFzcyhTdGF0ZS5JU19DTE9TSU5HKSApIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLmFkZENsYXNzKFN0YXRlLklTX0NMT1NJTkcpO1xyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLnJlbW92ZUNsYXNzKFN0YXRlLklTX09QRU5FRCk7XHJcblxyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLnJlbW92ZUNsYXNzKFN0YXRlLklTX0FDVElWRSk7XHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkucmVtb3ZlQ2xhc3MoU3RhdGUuSVNfQ1VSUkVOVCk7XHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkucmVtb3ZlQ2xhc3MoU3RhdGUuSVNfUFJFVklVUyk7XHJcblxyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLnNpYmxpbmdzKFNlbGVjdG9yLk1PREFMICsgJy4nICsgU3RhdGUuSVNfQUNUSVZFKS5sYXN0KCkuYWRkQ2xhc3MoU3RhdGUuSVNfQ1VSUkVOVCk7XHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkuc2libGluZ3MoU2VsZWN0b3IuTU9EQUwgKyAnLicgKyBTdGF0ZS5JU19BQ1RJVkUpLnJlbW92ZUNsYXNzKFN0YXRlLklTX1BSRVZJVVMpO1xyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLnNpYmxpbmdzKFNlbGVjdG9yLk1PREFMICsgJy4nICsgU3RhdGUuSVNfQ1VSUkVOVCkucHJldkFsbCgnLicgKyBTdGF0ZS5JU19BQ1RJVkUpLmZpcnN0KCkuYWRkQ2xhc3MoU3RhdGUuSVNfUFJFVklVUyk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIF90aGlzLnRyYW5zaXRpb24gKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0YXJnZXQpLnRyYW5zaXRpb25FbmRBZnRlcih0cmFuc2l0aW9uQ29tcGxldGUsIERFRkFVTFRfRFVSQVRJT04pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHRyYW5zaXRpb25Db21wbGV0ZSgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRhcmdldCkucmVtb3ZlQ2xhc3MoU3RhdGUuSVNfQ0xPU0lORyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0YXJnZXQpLmFkZENsYXNzKFN0YXRlLklTX0NMT1NFRCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0YXJnZXQpLnRyaWdnZXIoRXZlbnQuQ0xPU0VEKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoICEkKHRhcmdldCkuc2libGluZ3MoU2VsZWN0b3IuTU9EQUwgKyAnLicgKyBTdGF0ZS5JU19PUEVORUQpLmxlbmd0aCApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChkb2N1bWVudC5ib2R5KS5yZW1vdmVDbGFzcyhTdGF0ZS5JU19NT0RBTF9PUEVOKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLmF0dHIoJ2RhdGEtc2Nyb2xsdG9wJywgMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgY3VycmVudCA9ICQodGFyZ2V0KS5zaWJsaW5ncyhTZWxlY3Rvci5NT0RBTCArICcuJyArIFN0YXRlLklTX0NVUlJFTlQpWzBdO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCAkKGN1cnJlbnQpLmxlbmd0aCApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKGN1cnJlbnQpLmF0dHIoJ2RhdGEtc2Nyb2xsdG9wJywgJChjdXJyZW50KS5maW5kKFNlbGVjdG9yLk1PREFMX1dJTkRPVykuc2Nyb2xsVG9wKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoY3VycmVudCkuZmluZChTZWxlY3Rvci5NT0RBTF9XSU5ET1cpLnNjcm9sbFRvcCggJChjdXJyZW50KS5hdHRyKCdkYXRhLXNjcm9sbHRvcCcpICk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQod2luZG93KS5zY3JvbGxUb3AoX3RoaXMuc2Nyb2xsdG9wKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAkLmZuLm1vZGFsID0gZnVuY3Rpb24ob3B0aW9uKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZGF0YSA9ICQodGhpcykuZGF0YShVSV9OQU1FKSxcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2QgPSAodHlwZW9mIG9wdGlvbiA9PT0gJ3N0cmluZycpICYmIG9wdGlvbjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiggIWRhdGEgKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA9IG5ldyBNb2RhbCh0aGlzKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmRhdGEoVUlfTkFNRSwgZGF0YSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIG1ldGhvZCApIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhW21ldGhvZF0odGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgfSkoKTtcclxuXHJcbn0pKHdpbmRvdy5qUXVlcnksIHdpbmRvdyk7XHJcbiJdfQ==
